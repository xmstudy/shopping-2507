<<<<<<< Updated upstream
{"version":3,"sources":["uni-app:///main.js","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?6d5b","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?56fe","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?e897","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?748b","uni-app:///subpackages/goods/detail/detail.vue","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?cef1","webpack:///D:/xwechat_files/wxid_tff0c4yfudpq22_1be9/msg/file/2025-09/shopping_25_07/subpackages/goods/detail/detail.vue?dd4f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","data","goodsId","statusBarHeight","capsuleHeight","capsuleTop","loading","scrollTop","scrollTopCache","showSku","skuActionType","selectedSkuIndex","quantity","skuOptions","spec","productData","currentImageIndex","productImages","activeTab","tabList","id","productName","currentPrice","originalPrice","isFavorite","salesCount","productDetailHtml","productIntroductionHtml","cartCount","reviewList","reviewStats","_skuSpecsCache","computed","headerStyle","contentTopPx","selectedSkuPrice","totalPrice","onLoad","mounted","methods","initPageLayout","onScroll","onSwiperChange","switchTab","scrollToElement","goTo","q","previewImage","uni","current","urls","previewReviewImage","goToComment","title","icon","goodsName","goodsImage","url","toggleFavorite","params","favorFlag","res","console","formatTime","goBack","getApp","delta","shareProduct","goToService","showSkuSelector","closeSkuSelector","addToCart","buyNow","confirmSkuAction","addToCartWithSku","selectedSku","skuId","goodsNum","getSelectedSku","getSelectedSkuId","buyNowWithSku","orderData","goodsList","orderType","promotionId","globalData","fail","selectSpecValue","getSkuPrice","getCachedSkuSpecs","sku","parsedSpecs","clearSkuCache","updateSelectedSku","increaseQuantity","decreaseQuantity","fetchProductDetail","skus","processProductImages","processSkuOptions","specConfig","values","selectedValue","specOption","price","value","getSkuImage","goToCart","content","confirmText","success","phoneNumber","Promise","pageNum","pageSize","commentsRes","statsRes","userName","userAvatar","rating","images","createTime","goodRate","totalCount"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AACwN;AACxN,gBAAgB,8NAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAA+1B,CAAgB,q2BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC2Nn3B;AAMA;AAEA;AAAA;AAAA;AAAA,eAEA;EACAC;EACAC;IACA;MACA;MACAC;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;QACAC;MACA;MAEA;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;MACAC;QACAnB;QACAoB;MACA,GACA;QACApB;QACAoB;MACA,GACA;QACApB;QACAoB;MACA,EACA;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MAEA;MACAC;MAGA;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;IACA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IAEAC;MACA;IACA;EACA;EAEAC;IACA;IACA;MACA;IACA;EACA;EAEAC;IACA;IACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACA;MAGA;QACA;QACA;UACA;UACA;QACA;MACA;;MAGA;IAKA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACAC;MACAA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QAAA;MAAA;MACAC;QACAC;QACAC;MACA;IACA;IAEA;IACAC;MACAH;QACAC;QACAC;MACA;IACA;IAEA;IACAE;MACA;QACAJ;UACAK;UACAC;QACA;QACA;MACA;;MAEA;MACA;QACApD;QACAqD;QACAC;QACAlC;QACAC;MACA;;MAEA;MACAyB;QACAS;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;kBACAzD;kBACA0D;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;kBACA;kBACAb;oBACAK;oBACAC;kBACA;gBACA;kBACAN;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAQ;gBACAd;kBACAK;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAS;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;;MAEA;MACA;QACA;QACA;UACAC;QACA;QACA;QACAjB;UACAS;QACA;MACA;QACA;QACAT;UACAkB;QACA;MACA;IACA;IAEA;IACAC;MACAnB;QACAK;QACAC;MACA;IACA;IAGA;IACAc;MACApB;QACAK;QACAC;MACA;IACA;IAEA;IACAe;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA3B;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBACAK;kBACAiB;kBACAC;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAhB;gBACA;kBACAb;oBACAK;oBACAC;kBACA;kBACA;gBACA;kBACAN;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAQ;gBACAd;kBACAK;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAwB;MAAA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QAAA;MAAA;MAEA;QACA;UACA;UACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAJ;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACA5B;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAGA;kBACA;kBACA2B;oBACAC;sBACAN;sBACAC;oBACA;oBACAM;oBAAA;oBACAC;kBACA,GAEA;kBACAC;kBACAA;kBAEA;oBACApB;kBACA;kBACA;kBACAjB;oBACAS;oBACA6B;sBACAxB;sBACAd;wBACAK;wBACAC;sBACA;oBACA;kBACA;kBAEA;gBACA;kBACAQ;kBACAd;oBACAK;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAiC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MAEA;QAAA;MAAA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;YACA,uCACAC;cACAC;YAAA;UAEA;YACA7B;YACA,uCACA4B;cACAC;YAAA;UAEA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;MAEA;QACA;UACA;YACA;YACA;UACA;QACA;QAEA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAhD;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAAA;gBAKA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAO;gBAEA;kBACA5D,iBAEA;kBACA;;kBAEA;kBACA;kBACA;kBACA;kBACA;kBACA;;kBAEA;kBACA,qDACAA;oBACAW;oBACAqF;kBAAA,EACA;;kBAEA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA,yIACAhG,mCACA;;kBAEA;kBACA;gBAEA;kBACA+C;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAQ;gBACAd;kBACAK;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA4C;MACA;;MAEA;MACA;QACA;UACA;UACA;YACA;cAAA;gBACAzC;cACA;YAAA;UACA;QACA;UACA;UACA;YAAA;UAAA;UACA;YAAA;cACAA;YACA;UAAA;QACA;MACA;;MAEA;MACA;QACA;UACAA;QACA;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEA;IACA0C;MAAA;MACArC;MACAA;MAEA;QACAA;QACA;MACA;;MAEA;MACA;QACAA;QACA;MACA;MAEA;MACA;MAEAA;MACAA;;MAEA;MACA;MACA;QACA;UACAsC;UACAtC;QACA;UACAA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACAsC;QACAtC;QACA;UACA9D;UACAqG;UACAC;UAAA;UACAL;QACA;;QAEA;QACAnF;UACAgD;UACA;YACA;UACA;UAEAA;UAEA;YACAyC;cACA3B;cACA4B;cACA5F;cACA6F;YACA;UACA;QACA;QAEA;MACA;;MAEA;MACA;QACA;MACA;MAEA3C;IACA;IAEA;IACA4C;MACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA1C;MACA;MACA;MACAjB;QACAS;MACA;IACA;EAAA,iFAGA;IACAT;MACAK;MACAuD;MACAC;MACAC;QACA;UACA9D;YACA+D;UACA;QACA;MACA;IACA;EACA,4FAGA;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,OAGAC;cACA;cACA;gBACA9G;gBACA+G;gBACAC;cACA;cACA;cACA,6CACA;YAAA;cAAA;cAAA;cATAC;cAAAC;cAWA;cACA;gBACA;gBACA;;gBAEA;gBACA;kBAAA;oBACAhG;oBACAiG;oBACAC;oBACAC;oBACAX;oBACAY;oBACAC;kBACA;gBAAA;cACA;;cAEA;cACA;gBACA;kBACAC;kBACAC;gBAAA,GACAP,cACA;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAGAtD;cACA;cACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,8FAGA0D;IACA;IAEA;MACA;MACA;QACA;QACA;UACA;QACA;QACA;QACA;UAAA;QAAA;MACA;;MAEA;MACA;QACA;MACA;MAEA;IACA;MACA1D;MACA;IACA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACliCA;AAAA;AAAA;AAAA;AAA8mD,CAAgB,gjDAAG,EAAC,C;;;;;;;;;;;ACAloD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpackages/goods/detail/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpackages/goods/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=d7166054&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7166054\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpackages/goods/detail/detail.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=d7166054&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.productImages.length\n  var g1 = _vm.reviewList && _vm.reviewList.length > 0\n  var l0 = g1\n    ? _vm.__map(_vm.reviewList, function (review, index) {\n        var $orig = _vm.__get_orig(review)\n        var m0 = _vm.formatTime(review.createTime)\n        var g2 = review.images && review.images.length > 0\n        return {\n          $orig: $orig,\n          m0: m0,\n          g2: g2,\n        }\n      })\n    : null\n  var m1 = _vm.showSku ? _vm.getSkuImage() : null\n  var l2 = _vm.showSku\n    ? _vm.__map(_vm.skuOptions.spec, function (spec, specIndex) {\n        var $orig = _vm.__get_orig(spec)\n        var l1 = _vm.__map(spec.values, function (value, valueIndex) {\n          var $orig = _vm.__get_orig(value)\n          var m2 = _vm.getSkuPrice(specIndex, value)\n          var m3 = m2 ? _vm.getSkuPrice(specIndex, value) : null\n          return {\n            $orig: $orig,\n            m2: m2,\n            m3: m3,\n          }\n        })\n        return {\n          $orig: $orig,\n          l1: l1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        m1: m1,\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"product-detail\">\n\t\t<!-- 页面主体内容 -->\n\t\t<scroll-view scroll-y class=\"detail-body\" :scroll-top=\"scrollTop\" :scroll-with-animation=\"true\"\n\t\t\t@scroll=\"onScroll\">\n\t\t\t<!-- 1. 轮播图区域 -->\n\t\t\t<view class=\"product-banner\">\n\t\t\t\t<swiper class=\"banner-swiper\" :indicator-dots=\"false\" :autoplay=\"false\" @change=\"onSwiperChange\">\n\t\t\t\t\t<swiper-item v-for=\"(image, index) in productImages\" :key=\"index\">\n\t\t\t\t\t\t<image class=\"banner-image\" :src=\"image.url\" mode=\"aspectFill\" @click=\"previewImage(index)\">\n\t\t\t\t\t\t</image>\n\t\t\t\t\t</swiper-item>\n\t\t\t\t</swiper>\n\t\t\t</view>\n\n\t\t\t<!-- 2. Tab导航和轮播指示器 -->\n\t\t\t<view class=\"tab-nav\">\n\t\t\t\t<view class=\"tab-container\">\n\t\t\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === index }\" v-for=\"(tab, index) in tabList\"\n\t\t\t\t\t\t:key=\"index\" @click=\"switchTab(index)\">\n\t\t\t\t\t\t{{ tab.name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"swiper-indicator\">\n\t\t\t\t\t<text>{{ currentImageIndex + 1 }}/{{ productImages.length }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 3. 商品信息区域 -->\n\t\t\t<view class=\"product-info\" id=\"product-info\">\n\t\t\t\t<!-- 商品名称和收藏 -->\n\t\t\t\t<view class=\"product-header\">\n\t\t\t\t\t<view class=\"product-title\">\n\t\t\t\t\t\t<text>{{ productName }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"favorite-btn\" @click=\"toggleFavorite\">\n\t\t\t\t\t\t<u-icon :name=\"isFavorite ? 'star-fill' : 'star'\" :color=\"isFavorite ? '#ff4d4f' : '#999'\"\n\t\t\t\t\t\t\tsize=\"24\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 价格和商品数据 -->\n\t\t\t\t<view class=\"price-stats-row\">\n\t\t\t\t\t<view class=\"price-info\">\n\t\t\t\t\t\t<view class=\"current-price\">\n\t\t\t\t\t\t\t<text class=\"price-symbol\">¥</text>\n\t\t\t\t\t\t\t<text class=\"price-value\">{{ currentPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"original-price\" v-if=\"originalPrice > currentPrice\">\n\t\t\t\t\t\t\t<text>¥{{ originalPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"product-stats\">\n\t\t\t\t\t\t<view class=\"stat-item\">\n\t\t\t\t\t\t\t<text class=\"stat-label\">库存</text>\n\t\t\t\t\t\t\t<text class=\"stat-value\">{{ productData.quantity || 0 }}件</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"stat-item\">\n\t\t\t\t\t\t\t<text class=\"stat-label\">已售</text>\n\t\t\t\t\t\t\t<text class=\"stat-value\">{{ salesCount }}+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 4. 商品详情介绍 -->\n\t\t\t<view class=\"product-detail-content\" id=\"detail-content\">\n\t\t\t\t<view class=\"section-title\">商品详情</view>\n\t\t\t\t<view class=\"detail-rich-text\">\n\t\t\t\t\t<rich-text :nodes=\"productDetailHtml\"></rich-text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 5. 用户评论 -->\n\t\t\t<view class=\"product-reviews\" id=\"product-reviews\">\n\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t<text>用户评价</text>\n\t\t\t\t\t<view class=\"review-action\" @click=\"goToComment\">\n\t\t\t\t\t\t<text>我要评论</text>\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" size=\"14\" color=\"#999\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 评论统计 -->\n\t\t\t\t<view class=\"review-stats\" v-if=\"reviewStats\">\n\t\t\t\t\t<view class=\"stats-item\">\n\t\t\t\t\t\t<text class=\"stats-label\">好评率</text>\n\t\t\t\t\t\t<text class=\"stats-value\">{{ reviewStats.goodRate }}%</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"stats-item\">\n\t\t\t\t\t\t<text class=\"stats-label\">总评价</text>\n\t\t\t\t\t\t<text class=\"stats-value\">{{ reviewStats.totalCount }}条</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"review-list\" v-if=\"reviewList && reviewList.length > 0\">\n\t\t\t\t\t<view class=\"review-item\" v-for=\"(review, index) in reviewList\" :key=\"index\">\n\t\t\t\t\t\t<view class=\"review-header\">\n\t\t\t\t\t\t\t<image class=\"user-avatar\" :src=\"review.userAvatar || '/static/images/default-avatar.png'\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t\t\t<text class=\"user-name\">{{ review.userName || '匿名用户' }}</text>\n\t\t\t\t\t\t\t\t<view class=\"review-stars\">\n\t\t\t\t\t\t\t\t\t<u-icon v-for=\"star in 5\" :key=\"star\" name=\"star-fill\"\n\t\t\t\t\t\t\t\t\t\t:color=\"star <= review.rating ? '#ffa500' : '#e0e0e0'\" size=\"12\"></u-icon>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"review-time\">{{ formatTime(review.createTime) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"review-content\">\n\t\t\t\t\t\t\t<text>{{ review.content }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"review-images\" v-if=\"review.images && review.images.length > 0\">\n\t\t\t\t\t\t\t<image v-for=\"(img, imgIndex) in review.images\" :key=\"imgIndex\" class=\"review-image\"\n\t\t\t\t\t\t\t\t:src=\"img\" mode=\"aspectFill\" @click=\"previewReviewImage(review.images, imgIndex)\">\n\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 暂无评论 -->\n\t\t\t\t<view class=\"no-reviews\" v-else>\n\t\t\t\t\t<text>暂无评论，快来做第一个评论的人吧~</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 6. 底部富文本介绍 -->\n\t\t\t<view class=\"product-introduction\">\n\t\t\t\t<view class=\"introduction-rich-text\">\n\t\t\t\t\t<rich-text :nodes=\"productIntroductionHtml\"></rich-text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\n\t\t<!-- SKU选择弹窗 -->\n\t\t<u-popup v-if=\"showSku\" :show=\"showSku\" @close=\"closeSkuSelector\" mode=\"bottom\" :round=\"20\" :overlay=\"true\"\n\t\t\t:closeOnClickOverlay=\"true\" :safeAreaInsetBottom=\"true\">\n\t\t\t<view class=\"sku-popup\">\n\t\t\t\t<view class=\"sku-header\">\n\t\t\t\t\t<image class=\"sku-product-image\" :src=\"getSkuImage()\" mode=\"aspectFill\"></image>\n\t\t\t\t\t<view class=\"sku-product-info\">\n\t\t\t\t\t\t<text class=\"sku-product-name\">{{ productName }}</text>\n\t\t\t\t\t\t<view class=\"sku-product-price\">\n\t\t\t\t\t\t\t<text class=\"sku-price-symbol\">¥</text>\n\t\t\t\t\t\t\t<text class=\"sku-price-value\">{{ selectedSkuPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"sku-close\" @click=\"closeSkuSelector\">\n\t\t\t\t\t\t<u-icon name=\"close\" color=\"#999\" size=\"20\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"sku-options\">\n\t\t\t\t\t<view class=\"sku-option-group\" v-for=\"(spec, specIndex) in skuOptions.spec\" :key=\"specIndex\">\n\t\t\t\t\t\t<text class=\"option-title\">{{ spec.name }}</text>\n\t\t\t\t\t\t<view class=\"option-items\">\n\t\t\t\t\t\t\t<view class=\"option-item\" v-for=\"(value, valueIndex) in spec.values\" :key=\"valueIndex\"\n\t\t\t\t\t\t\t\t:class=\"{ active: spec.selectedValue === value }\"\n\t\t\t\t\t\t\t\t@click=\"selectSpecValue(specIndex, value)\">\n\t\t\t\t\t\t\t\t<view class=\"option-content\">\n\t\t\t\t\t\t\t\t\t<text>{{ value }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"sku-price\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"getSkuPrice(specIndex, value)\">¥{{ getSkuPrice(specIndex, value) }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"quantity-selector\">\n\t\t\t\t\t\t<text class=\"quantity-title\">数量</text>\n\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"decreaseQuantity\">\n\t\t\t\t\t\t\t\t<u-icon name=\"minus\" color=\"#666\" size=\"16\"></u-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"quantity-value\">{{ quantity }}</text>\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"increaseQuantity\">\n\t\t\t\t\t\t\t\t<u-icon name=\"plus\" color=\"#666\" size=\"16\"></u-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"sku-footer\">\n\t\t\t\t\t<view class=\"sku-total\">\n\t\t\t\t\t\t<text>总计：</text>\n\t\t\t\t\t\t<text class=\"total-price\">¥{{ totalPrice }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"sku-action\" @click=\"confirmSkuAction\">\n\t\t\t\t\t\t<text>{{ skuActionType === 'cart' ? '加入购物车' : '确认购买' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-popup>\n\n\t\t<!-- 底部操作栏 -->\n\t\t<view class=\"bottom-actions\">\n\t\t\t<view class=\"action-left\">\n\t\t\t\t<view class=\"action-btn\" @click=\"goToCart\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/images/gwc.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>购物车</text>\n\t\t\t\t</view>\n\t\t\t\t<button class=\"action-btn customer-service-btn\" open-type=\"contact\" hover-class=\"none\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/images/wdkf.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>客服</text>\n\t\t\t\t</button>\n\t\t\t\t<view class=\"action-btn\" @click=\"toggleFavorite\">\n\t\t\t\t\t<u-icon :name=\"isFavorite ? 'star-fill' : 'star'\" :color=\"isFavorite ? '#ff4d4f' : '#666'\"\n\t\t\t\t\t\tsize=\"20\"></u-icon>\n\t\t\t\t\t<text>收藏</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"action-right\">\n\t\t\t\t<view class=\"add-cart-btn\" @click=\"addToCart\">加入购物车</view>\n\t\t\t\t<view class=\"buy-now-btn\" @click=\"buyNow\">立即购买</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport {\n\t\tfetchGoodsDetail,\n\t\tchangeGoodsFavor,\n\t\tfetchGoodsCommentList,\n\t\tgetCommentStats\n\t} from '@/api/goods'\n\timport {\n\t\tAddCart\n\t} from '@/api/cart'\n\n\texport default {\n\t\tname: 'ProductDetail',\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 商品ID\n\t\t\t\tgoodsId: null,\n\n\t\t\t\t// 顶部安全区域\n\t\t\t\tstatusBarHeight: 0,\n\t\t\t\tcapsuleHeight: 44,\n\t\t\t\tcapsuleTop: 0,\n\n\t\t\t\t// 页面状态\n\t\t\t\tloading: false,\n\t\t\t\tscrollTop: 0, // scroll-view的滚动位置\n\t\t\t\tscrollTopCache: 0, // 滚动位置缓存\n\n\t\t\t\t// SKU相关\n\t\t\t\tshowSku: false,\n\t\t\t\tskuActionType: 'cart', // 'cart' 或 'buy'\n\t\t\t\tselectedSkuIndex: 0,\n\t\t\t\tquantity: 1,\n\t\t\t\tskuOptions: {\n\t\t\t\t\tspec: []\n\t\t\t\t},\n\n\t\t\t\t// 商品数据\n\t\t\t\tproductData: null,\n\n\t\t\t\t// 轮播相关\n\t\t\t\tcurrentImageIndex: 0,\n\t\t\t\tproductImages: [],\n\n\t\t\t\t// Tab导航\n\t\t\t\tactiveTab: 0,\n\t\t\t\ttabList: [{\n\t\t\t\t\t\tname: '商品',\n\t\t\t\t\t\tid: 'product-info'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '详情',\n\t\t\t\t\t\tid: 'detail-content'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '评价',\n\t\t\t\t\t\tid: 'product-reviews'\n\t\t\t\t\t}\n\t\t\t\t],\n\n\t\t\t\t// 商品信息\n\t\t\t\tproductName: '',\n\t\t\t\tcurrentPrice: 0,\n\t\t\t\toriginalPrice: 0,\n\t\t\t\tisFavorite: false,\n\t\t\t\tsalesCount: 0,\n\n\t\t\t\t// 商品详情HTML\n\t\t\t\tproductDetailHtml: '',\n\n\t\t\t\t// 底部富文本介绍HTML\n\t\t\t\tproductIntroductionHtml: '',\n\n\n\t\t\t\t// 购物车数量\n\t\t\t\tcartCount: 0,\n\n\t\t\t\t// 评论相关\n\t\t\t\treviewList: [],\n\t\t\t\treviewStats: null,\n\n\t\t\t\t// 缓存解析后的SKU规格数据\n\t\t\t\t_skuSpecsCache: null\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\t// 顶部标题栏样式\n\t\t\theaderStyle() {\n\t\t\t\treturn `padding-top:${this.capsuleTop}px;background:#fff;`\n\t\t\t},\n\n\t\t\t// 内容区顶部偏移\n\t\t\tcontentTopPx() {\n\t\t\t\treturn this.capsuleTop + this.capsuleHeight\n\t\t\t},\n\n\t\t\t// SKU相关计算属性\n\t\t\tselectedSkuPrice() {\n\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\tif (selectedSku) {\n\t\t\t\t\t// 优先使用促销价格，其次使用原价\n\t\t\t\t\treturn selectedSku.promotionPrice || selectedSku.price || this.currentPrice\n\t\t\t\t}\n\t\t\t\treturn this.currentPrice || 0\n\t\t\t},\n\n\t\t\ttotalPrice() {\n\t\t\t\treturn (this.selectedSkuPrice * this.quantity).toFixed(2)\n\t\t\t}\n\t\t},\n\n\t\tonLoad(options) {\n\t\t\t// 获取商品ID\n\t\t\tif (options.goodsId) {\n\t\t\t\tthis.goodsId = options.goodsId\n\t\t\t}\n\t\t},\n\n\t\tmounted() {\n\t\t\tthis.initPageLayout()\n\t\t\t// 获取商品详情数据\n\t\t\tthis.fetchProductDetail()\n\t\t},\n\n\t\tmethods: {\n\t\t\t// 初始化页面布局\n\t\t\tinitPageLayout() {\n\t\t\t\tconst sys = uni.getSystemInfoSync()\n\t\t\t\tthis.statusBarHeight = sys.statusBarHeight || 0\n\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\ttry {\n\t\t\t\t\tconst rect = wx.getMenuButtonBoundingClientRect()\n\t\t\t\t\tif (rect && rect.height) {\n\t\t\t\t\t\tthis.capsuleHeight = rect.height\n\t\t\t\t\t\tthis.capsuleTop = rect.top\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t\t// #endif\n\n\t\t\t\t// 其他端给个合理默认\n\t\t\t\t// #ifndef MP-WEIXIN\n\t\t\t\tthis.capsuleHeight = 44\n\t\t\t\tthis.capsuleTop = this.statusBarHeight\n\t\t\t\t// #endif\n\t\t\t},\n\n\t\t\t// scroll-view滚动事件\n\t\t\tonScroll(e) {\n\t\t\t\tthis.scrollTopCache = e.detail.scrollTop\n\t\t\t},\n\n\t\t\t// 轮播图切换\n\t\t\tonSwiperChange(e) {\n\t\t\t\tthis.currentImageIndex = e.detail.current\n\t\t\t},\n\n\t\t\t// Tab切换\n\t\t\tswitchTab(index) {\n\t\t\t\tthis.activeTab = index\n\t\t\t\tconst targetId = this.tabList[index].id\n\t\t\t\tthis.scrollToElement(targetId)\n\t\t\t},\n\n\t\t\t// 滚动到指定元素\n\t\t\tscrollToElement(elementId) {\n\t\t\t\tthis.goTo(`#${elementId}`)\n\t\t\t},\n\n\t\t\t// 使用scroll-view的滚动方法\n\t\t\tgoTo(selector) {\n\t\t\t\tconst q = uni.createSelectorQuery().in(this)\n\t\t\t\tq.select(selector).boundingClientRect()\n\t\t\t\tq.exec(rects => {\n\t\t\t\t\tconst sec = rects?.[0]\n\t\t\t\t\tif (!sec) return\n\t\t\t\t\t// 计算目标位置，考虑当前滚动位置和留出间距\n\t\t\t\t\tconst targetScrollTop = sec.top + this.scrollTopCache - uni.upx2px(20)\n\t\t\t\t\t// 设置scroll-view的滚动位置\n\t\t\t\t\tthis.scrollTop = Math.max(targetScrollTop, 0)\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 预览图片\n\t\t\tpreviewImage(index) {\n\t\t\t\tconst urls = this.productImages.map(img => img.url)\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index,\n\t\t\t\t\turls: urls\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 预览评论图片\n\t\t\tpreviewReviewImage(images, index) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index,\n\t\t\t\t\turls: images\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 跳转到评论页面\n\t\t\tgoToComment() {\n\t\t\t\tif (!this.productData) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品信息加载中',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 构建商品信息参数\n\t\t\t\tconst productInfo = {\n\t\t\t\t\tgoodsId: this.goodsId,\n\t\t\t\t\tgoodsName: this.productName,\n\t\t\t\t\tgoodsImage: this.productImages.length > 0 ? this.productImages[0].url : '',\n\t\t\t\t\tcurrentPrice: this.currentPrice,\n\t\t\t\t\toriginalPrice: this.originalPrice\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 跳转到评论页面\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/subpackages/goods/commentsVIew/commentsVIew?productInfo=${encodeURIComponent(JSON.stringify(productInfo))}`\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 切换收藏状态\n\t\t\tasync toggleFavorite() {\n\t\t\t\ttry {\n\t\t\t\t\t// TODO changeGoodsFavor 会在这里使用\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tgoodsId: this.goodsId,\n\t\t\t\t\t\tfavorFlag: this.isFavorite ? 0 : 1 // 0取消收藏，1收藏\n\t\t\t\t\t}\n\n\t\t\t\t\tconst res = await changeGoodsFavor(params)\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.isFavorite = !this.isFavorite\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: this.isFavorite ? '已收藏' : '已取消收藏',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '操作失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('收藏操作失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '操作失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 格式化时间\n\t\t\tformatTime(timeStr) {\n\t\t\t\tif (!timeStr) return ''\n\t\t\t\ttry {\n\t\t\t\t\tconst date = new Date(timeStr)\n\t\t\t\t\tconst year = date.getFullYear()\n\t\t\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0')\n\t\t\t\t\tconst day = String(date.getDate()).padStart(2, '0')\n\t\t\t\t\treturn `${year}-${month}-${day}`\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn timeStr\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 返回上一页\n\t\t\tgoBack() {\n\t\t\t\t// 获取当前页面栈\n\t\t\t\tconst pages = getCurrentPages()\n\n\t\t\t\t// 如果页面栈只有1页或者没有上一页，跳转到首页\n\t\t\t\tif (pages.length <= 1) {\n\t\t\t\t\t// 设置全局下标为0\n\t\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\t\tgetApp().globalData.activeTabbarKey = 0\n\t\t\t\t\t}\n\t\t\t\t\t// 跳转到首页\n\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// 有上一页，正常返回\n\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 分享商品\n\t\t\tshareProduct() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '分享功能',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t// 跳转客服\n\t\t\tgoToService() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '客服功能',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 显示SKU选择器\n\t\t\tshowSkuSelector(type) {\n\t\t\t\tthis.skuActionType = type\n\t\t\t\tthis.showSku = true\n\t\t\t},\n\n\t\t\t// 关闭SKU选择器\n\t\t\tcloseSkuSelector() {\n\t\t\t\tthis.showSku = false\n\t\t\t},\n\n\t\t\t// 加入购物车\n\t\t\taddToCart() {\n\t\t\t\tthis.showSkuSelector('cart')\n\t\t\t},\n\n\t\t\t// 立即购买\n\t\t\tbuyNow() {\n\t\t\t\tthis.showSkuSelector('buy')\n\t\t\t},\n\n\t\t\t// 确认SKU操作\n\t\t\tasync confirmSkuAction() {\n\t\t\t\tif (this.skuActionType === 'cart') {\n\t\t\t\t\t// 加入购物车\n\t\t\t\t\tawait this.addToCartWithSku()\n\t\t\t\t} else {\n\t\t\t\t\t// 立即购买 - 跳转订单页面\n\t\t\t\t\tawait this.buyNowWithSku()\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 带SKU的加入购物车\n\t\t\tasync addToCartWithSku() {\n\t\t\t\ttry {\n\t\t\t\t\t// 获取选中的SKU\n\t\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\t\tif (!selectedSku || !selectedSku.skuId) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '商品信息异常，请重试',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO AddCart 会在这里使用\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tskuId: selectedSku.skuId,\n\t\t\t\t\t\tgoodsNum: this.quantity\n\t\t\t\t\t}\n\n\t\t\t\t\tconst res = await AddCart(params)\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '加入购物车成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.closeSkuSelector()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '加入购物车失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加入购物车失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '加入购物车失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 获取选中的SKU\n\t\t\tgetSelectedSku() {\n\t\t\t\tif (!this.productData.skus || this.productData.skus.length === 0) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\t// 如果没有规格选项，返回第一个SKU\n\t\t\t\tif (!this.skuOptions.spec || this.skuOptions.spec.length === 0) {\n\t\t\t\t\treturn this.productData.skus[0]\n\t\t\t\t}\n\n\t\t\t\t// 根据选中的规格找到对应的SKU\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\n\n\t\t\t\tconst matchedSku = this.productData.skus.find(sku => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst fullSpecs = JSON.parse(sku.fullSpecs || '{}')\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\n\t\t\t\t\t\t\treturn fullSpecs[specName] === value\n\t\t\t\t\t\t})\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// 如果找不到匹配的SKU，返回第一个\n\t\t\t\treturn matchedSku || this.productData.skus[0]\n\t\t\t},\n\n\t\t\t// 获取选中的SKU ID\n\t\t\tgetSelectedSkuId() {\n\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\treturn selectedSku ? selectedSku.skuId : null\n\t\t\t},\n\n\t\t\t// 带SKU的立即购买\n\t\t\tasync buyNowWithSku() {\n\t\t\t\tconst skuId = this.getSelectedSkuId()\n\t\t\t\tif (!skuId) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请选择商品规格',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\t// 构建订单数据（符合接口要求的格式）\n\t\t\t\t\tconst orderData = {\n\t\t\t\t\t\tgoodsList: [{\n\t\t\t\t\t\t\tskuId: skuId,\n\t\t\t\t\t\t\tgoodsNum: this.quantity\n\t\t\t\t\t\t}],\n\t\t\t\t\t\torderType: 1, // 普通订单\n\t\t\t\t\t\tpromotionId: null // 无促销活动\n\t\t\t\t\t}\n\n\t\t\t\t\t// 将订单数据存储到全局数据中\n\t\t\t\t\tconst globalData = require('@/utils/globalData.js').default\n\t\t\t\t\tglobalData.orderData = orderData\n\n\t\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\t\tgetApp().globalData.orderData = orderData\n\t\t\t\t\t}\n\t\t\t\t\t// 跳转到订单确认页面\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/subpackages/order/detail/detail',\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('页面跳转失败:', err)\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '页面跳转失败，请重试',\n\t\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.closeSkuSelector()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('预览订单失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '网络错误，请重试',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 选择规格值\n\t\t\tselectSpecValue(specIndex, value) {\n\t\t\t\tthis.skuOptions.spec[specIndex].selectedValue = value\n\t\t\t\tthis.updateSelectedSku()\n\t\t\t},\n\n\t\t\t// 获取SKU价格\n\t\t\tgetSkuPrice(specIndex, value) {\n\t\t\t\tconst spec = this.skuOptions.spec[specIndex]\n\t\t\t\tif (!spec || !spec.skus) return null\n\n\t\t\t\tconst sku = spec.skus.find(s => s.value === value)\n\t\t\t\treturn sku ? sku.price : null\n\t\t\t},\n\n\t\t\t// 获取缓存的SKU规格数据\n\t\t\tgetCachedSkuSpecs() {\n\t\t\t\tif (!this._skuSpecsCache && this.productData && this.productData.skus) {\n\t\t\t\t\tthis._skuSpecsCache = this.productData.skus.map(sku => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...sku,\n\t\t\t\t\t\t\t\tparsedSpecs: JSON.parse(sku.fullSpecs)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('解析SKU规格失败:', error)\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...sku,\n\t\t\t\t\t\t\t\tparsedSpecs: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn this._skuSpecsCache\n\t\t\t},\n\n\t\t\t// 清理SKU缓存\n\t\t\tclearSkuCache() {\n\t\t\t\tthis._skuSpecsCache = null\n\t\t\t},\n\n\t\t\t// 更新选中的SKU\n\t\t\tupdateSelectedSku() {\n\t\t\t\t// 根据当前选择的规格值找到对应的SKU\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\n\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\n\n\t\t\t\tif (cachedSkus && cachedSkus.length > 0) {\n\t\t\t\t\tconst matchingSku = cachedSkus.find(sku => {\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\n\t\t\t\t\t\t\treturn sku.parsedSpecs[specName] === value\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\tif (matchingSku) {\n\t\t\t\t\t\tthis.selectedSkuIndex = this.productData.skus.indexOf(matchingSku)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 增加数量\n\t\t\tincreaseQuantity() {\n\t\t\t\tif (this.quantity < 99) {\n\t\t\t\t\tthis.quantity++\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 减少数量\n\t\t\tdecreaseQuantity() {\n\t\t\t\tif (this.quantity > 1) {\n\t\t\t\t\tthis.quantity--\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 获取商品详情数据\n\t\t\tasync fetchProductDetail() {\n\t\t\t\tif (!this.goodsId) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品ID不存在',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.loading = true\n\t\t\t\t\t// TODO fetchGoodsDetail 会在这里使用\n\t\t\t\t\tconst res = await fetchGoodsDetail(this.goodsId)\n\n\t\t\t\t\tif (res.code === 200 && res.data) {\n\t\t\t\t\t\tconst data = res.data\n\n\t\t\t\t\t\t// 清理旧的SKU缓存\n\t\t\t\t\t\tthis.clearSkuCache()\n\n\t\t\t\t\t\t// 设置商品基本信息\n\t\t\t\t\t\tthis.productName = data.goodsName || '商品名称'\n\t\t\t\t\t\tthis.currentPrice = data.promotionPrice || data.price || 0\n\t\t\t\t\t\tthis.originalPrice = data.originPrice || data.price || 0\n\t\t\t\t\t\tthis.isFavorite = data.isFavor === 1\n\t\t\t\t\t\tthis.salesCount = (data.soldNum || 0) + (data.virtualSoldNum || 0)\n\n\t\t\t\t\t\t// 设置商品数据\n\t\t\t\t\t\tthis.productData = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tquantity: data.quantity || 0,\n\t\t\t\t\t\t\tskus: data.skus || []\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// 处理商品图片\n\t\t\t\t\t\tthis.processProductImages(data)\n\n\t\t\t\t\t\t// 处理SKU选项\n\t\t\t\t\t\tthis.processSkuOptions(data)\n\n\t\t\t\t\t\t// 设置商品详情HTML\n\t\t\t\t\t\tthis.productDetailHtml = data.details || '<p>暂无详细介绍</p>'\n\n\t\t\t\t\t\t// 设置商品介绍HTML\n\t\t\t\t\t\tthis.productIntroductionHtml = data.sellingPoint ?\n\t\t\t\t\t\t\t`<div style=\"padding: 20px; line-height: 1.6;\"><p style=\"color: #666;\">${data.sellingPoint}</p></div>` :\n\t\t\t\t\t\t\t'<div style=\"padding: 20px; line-height: 1.6;\"><p style=\"color: #666;\">暂无商品介绍</p></div>'\n\n\t\t\t\t\t\t// 加载评论数据\n\t\t\t\t\t\tthis.loadCommentsData()\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '获取商品详情失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('获取商品详情失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取商品详情失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 处理商品图片\n\t\t\tprocessProductImages(data) {\n\t\t\t\tthis.productImages = []\n\n\t\t\t\t// 处理轮播图\n\t\t\t\tif (data.goodsImages) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst images = JSON.parse(data.goodsImages)\n\t\t\t\t\t\tif (Array.isArray(images)) {\n\t\t\t\t\t\t\tthis.productImages = images.map(url => ({\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// 如果解析失败，尝试按逗号分割\n\t\t\t\t\t\tconst images = data.goodsImages.split(',').filter(url => url.trim())\n\t\t\t\t\t\tthis.productImages = images.map(url => ({\n\t\t\t\t\t\t\turl: url.trim()\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 如果没有轮播图，使用主图\n\t\t\t\tif (this.productImages.length === 0 && data.goodsImage) {\n\t\t\t\t\tthis.productImages = [{\n\t\t\t\t\t\turl: data.goodsImage\n\t\t\t\t\t}]\n\t\t\t\t}\n\n\t\t\t\t// 如果还是没有图片，保持空数组\n\t\t\t\tif (this.productImages.length === 0) {\n\t\t\t\t\tthis.productImages = []\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 处理SKU选项\n\t\t\tprocessSkuOptions(data) {\n\t\t\t\tconsole.log('开始处理SKU选项')\n\t\t\t\tconsole.log('productData:', data)\n\n\t\t\t\tif (!data || !data.skus) {\n\t\t\t\t\tconsole.log('没有SKU数据')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// 如果已经处理过，直接返回\n\t\t\t\tif (this.skuOptions.spec.length > 0) {\n\t\t\t\t\tconsole.log('SKU选项已处理，跳过重复处理')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst skus = data.skus\n\t\t\t\tconst specOptions = data.specOptions\n\n\t\t\t\tconsole.log('原始SKU数据:', skus)\n\t\t\t\tconsole.log('规格配置:', specOptions)\n\n\t\t\t\t// 解析规格选项配置\n\t\t\t\tlet specConfig = []\n\t\t\t\tif (specOptions) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tspecConfig = JSON.parse(specOptions)\n\t\t\t\t\t\tconsole.log('解析后的规格配置:', specConfig)\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('解析规格配置失败:', error)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 重新构建SKU选项结构\n\t\t\t\tthis.skuOptions.spec = []\n\n\t\t\t\t// 使用缓存的SKU规格数据\n\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\n\n\t\t\t\t// 根据规格配置创建选项\n\t\t\t\tspecConfig.forEach(spec => {\n\t\t\t\t\tconsole.log('处理规格:', spec)\n\t\t\t\t\tconst specOption = {\n\t\t\t\t\t\tname: spec.attrName,\n\t\t\t\t\t\tvalues: spec.attrValue,\n\t\t\t\t\t\tselectedValue: spec.attrValue[0], // 默认选择第一个\n\t\t\t\t\t\tskus: []\n\t\t\t\t\t}\n\n\t\t\t\t\t// 为每个规格值找到对应的SKU\n\t\t\t\t\tspec.attrValue.forEach(value => {\n\t\t\t\t\t\tconsole.log('查找规格值:', value)\n\t\t\t\t\t\tconst matchingSkus = cachedSkus.filter(sku => {\n\t\t\t\t\t\t\treturn sku.parsedSpecs[spec.attrName] === value\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tconsole.log('匹配的SKU:', matchingSkus)\n\n\t\t\t\t\t\tif (matchingSkus.length > 0) {\n\t\t\t\t\t\t\tspecOption.skus.push({\n\t\t\t\t\t\t\t\tskuId: matchingSkus[0].skuId,\n\t\t\t\t\t\t\t\tprice: matchingSkus[0].price,\n\t\t\t\t\t\t\t\tquantity: matchingSkus[0].quantity,\n\t\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.skuOptions.spec.push(specOption)\n\t\t\t\t})\n\n\t\t\t\t// 如果有SKU数据，使用第一个SKU的价格作为默认价格\n\t\t\t\tif (skus.length > 0) {\n\t\t\t\t\tthis.selectedSkuIndex = 0\n\t\t\t\t}\n\n\t\t\t\tconsole.log('处理后的SKU选项:', this.skuOptions.spec)\n\t\t\t},\n\n\t\t\t// 获取SKU弹窗中的商品图片\n\t\t\tgetSkuImage() {\n\t\t\t\tif (this.productImages && this.productImages.length > 0 && this.productImages[0]) {\n\t\t\t\t\treturn this.productImages[0].url || ''\n\t\t\t\t}\n\t\t\t\treturn ''\n\t\t\t},\n\n\t\t\t// 跳转到购物车\n\t\t\tgoToCart() {\n\t\t\t\t// 设置全局tabbar索引为2（购物车）\n\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\tgetApp().globalData.activeTabbarKey = 2\n\t\t\t\t}\n\t\t\t\t// 跳转到首页，购物车会通过v-if渲染\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 联系客服\n\t\t\tgoToService() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '联系客服',\n\t\t\t\t\tcontent: '请拨打客服热线：400-123-4567',\n\t\t\t\t\tconfirmText: '拨打',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.makePhoneCall({\n\t\t\t\t\t\t\t\tphoneNumber: '400-123-4567'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 加载评论数据\n\t\t\tasync loadCommentsData() {\n\t\t\t\ttry {\n\t\t\t\t\t// 并行加载评论列表和统计数据\n\t\t\t\t\tconst [commentsRes, statsRes] = await Promise.all([\n\t\t\t\t\t\t// 使用 fetchGoodsCommentList 获取评论列表\n\t\t\t\t\t\tfetchGoodsCommentList({ \n\t\t\t\t\t\t\tgoodsId: this.goodsId, \n\t\t\t\t\t\t\tpageNum: 1, \n\t\t\t\t\t\t\tpageSize: 5 \n\t\t\t\t\t\t}),\n\t\t\t\t\t\t// 获取评论统计数据\n\t\t\t\t\t\tgetCommentStats(this.goodsId)\n\t\t\t\t\t])\n\n\t\t\t\t\t// 处理评论列表\n\t\t\t\t\tif (commentsRes.code === 200 && commentsRes.data) {\n\t\t\t\t\t\t// 适配不同的数据结构\n\t\t\t\t\t\tthis.reviewList = commentsRes.data.rows || commentsRes.data.list || commentsRes.data.records || []\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 格式化评论数据，确保字段统一\n\t\t\t\t\t\tthis.reviewList = this.reviewList.map(comment => ({\n\t\t\t\t\t\t\tid: comment.id || comment.commentId,\n\t\t\t\t\t\t\tuserName: comment.memberName || comment.userName || '匿名用户',\n\t\t\t\t\t\t\tuserAvatar: comment.memberAvatar || comment.userAvatar || '/static/images/default-avatar.png',\n\t\t\t\t\t\t\trating: comment.rating || comment.score || 5,\n\t\t\t\t\t\t\tcontent: comment.content || comment.commentContent || '',\n\t\t\t\t\t\t\timages: this.parseCommentImages(comment.images || comment.commentImages),\n\t\t\t\t\t\t\tcreateTime: comment.createTime || comment.commentTime\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\n\t\t\t\t\t// 处理评论统计\n\t\t\t\t\tif (statsRes.code === 200 && statsRes.data) {\n\t\t\t\t\t\tthis.reviewStats = {\n\t\t\t\t\t\t\tgoodRate: statsRes.data.goodRate || 0,\n\t\t\t\t\t\t\ttotalCount: statsRes.data.totalCount || 0,\n\t\t\t\t\t\t\t...statsRes.data\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载评论数据失败:', error)\n\t\t\t\t\t// 设置空数据，不显示错误提示\n\t\t\t\t\tthis.reviewList = []\n\t\t\t\t\tthis.reviewStats = null\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 解析评论图片\n\t\t\tparseCommentImages(images) {\n\t\t\t\tif (!images) return []\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 如果是字符串，尝试解析为JSON\n\t\t\t\t\tif (typeof images === 'string') {\n\t\t\t\t\t\tconst parsed = JSON.parse(images)\n\t\t\t\t\t\tif (Array.isArray(parsed)) {\n\t\t\t\t\t\t\treturn parsed\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 如果不是数组，可能是逗号分隔的字符串\n\t\t\t\t\t\treturn images.split(',').filter(img => img.trim())\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 如果已经是数组，直接返回\n\t\t\t\t\tif (Array.isArray(images)) {\n\t\t\t\t\t\treturn images\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn []\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('解析评论图片失败:', error)\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.product-detail {\n\t\theight: 100vh;\n\t\tbackground: #f5f5f5;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t/* 固定顶部标题栏 */\n\t.detail-header {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 999;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\n\t}\n\n\t.header-content {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tjustify-content: center;\n\t\tpadding: 0 30rpx 16rpx 30rpx;\n\t\tposition: relative;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.header-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #111;\n\t}\n\n\t.header-left {\n\t\tposition: absolute;\n\t\tleft: 30rpx;\n\t\tbottom: 16rpx;\n\t}\n\n\t.cart-badge {\n\t\tposition: absolute;\n\t\ttop: -8rpx;\n\t\tright: -8rpx;\n\t\tbackground: #ff4d4f;\n\t\tcolor: #fff;\n\t\tfont-size: 20rpx;\n\t\tpadding: 2rpx 6rpx;\n\t\tborder-radius: 10rpx;\n\t\tmin-width: 16rpx;\n\t\ttext-align: center;\n\t}\n\n\t/* 页面主体 */\n\t.detail-body {\n\t\tflex: 1;\n\t\theight: 0;\n\t\tpadding-bottom: 120rpx;\n\t}\n\n\t/* 轮播图区域 */\n\t.product-banner {\n\t\tposition: relative;\n\t\theight: 600rpx;\n\t\tbackground: #fff;\n\t}\n\n\t.banner-swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.banner-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.swiper-indicator {\n\t\tposition: absolute;\n\t\tbottom: 20rpx;\n\t\tright: 20rpx;\n\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\tcolor: #fff;\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 20rpx;\n\t\tfont-size: 24rpx;\n\t}\n\n\t/* Tab导航 */\n\t.tab-nav {\n\t\tbackground: #f5f5f5;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 20rpx 30rpx;\n\t\tposition: relative;\n\t}\n\n\t.tab-container {\n\t\tdisplay: flex;\n\t\tbackground: #e0e0e0;\n\t\tborder-radius: 25rpx;\n\t\tpadding: 4rpx;\n\t\tposition: relative;\n\t}\n\n\t.tab-item {\n\t\tpadding: 16rpx 32rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tborder-radius: 21rpx;\n\t\ttransition: all 0.3s ease;\n\t\tposition: relative;\n\t\tz-index: 2;\n\n\t\t&.active {\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t\tbackground: #fff;\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t\t}\n\t}\n\n\t.swiper-indicator {\n\t\tposition: absolute;\n\t\tright: 30rpx;\n\t\ttop: 40rpx;\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tcolor: #fff;\n\t\tpadding: 12rpx 20rpx;\n\t\tborder-radius: 25rpx;\n\t\tfont-size: 24rpx;\n\t\tmin-width: 80rpx;\n\t\ttext-align: center;\n\t}\n\n\t/* 商品信息区域 */\n\t.product-info {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t.product-header {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.product-title {\n\t\tflex: 1;\n\t\tmargin-right: 20rpx;\n\n\t\ttext {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #333;\n\t\t\tline-height: 1.4;\n\t\t}\n\t}\n\n\t.favorite-btn {\n\t\tpadding: 8rpx;\n\t}\n\n\t.price-stats-row {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-end;\n\t}\n\n\t.price-info {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tgap: 20rpx;\n\t}\n\n\t.current-price {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\n\t\t.price-symbol {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #ff4d4f;\n\t\t\tmargin-right: 4rpx;\n\t\t}\n\n\t\t.price-value {\n\t\t\tfont-size: 48rpx;\n\t\t\tfont-weight: 700;\n\t\t\tcolor: #ff4d4f;\n\t\t}\n\t}\n\n\t.original-price {\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #999;\n\t\t\ttext-decoration: line-through;\n\t\t}\n\t}\n\n\t.product-stats {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t}\n\n\t.stat-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\n\t\t.stat-label {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t}\n\n\t\t.stat-value {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t}\n\t}\n\n\t/* 通用区域样式 */\n\t.product-detail-content {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t/* .product-reviews {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t} */\n\n\t/* 底部富文本介绍 */\n\t.product-introduction {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.introduction-rich-text {\n\t\tline-height: 1.6;\n\t}\n\n\t.section-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t}\n\n\t/* 商品详情 */\n\t.detail-rich-text {\n\t\tline-height: 1.6;\n\t}\n\n\n\n\t/* 用户评论 */\n\t.product-reviews {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t.section-title {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t}\n\n\t.review-action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\t\n\t\ttext {\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.review-stats {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding: 20rpx;\n\t\tbackground: #f8f9fa;\n\t\tborder-radius: 12rpx;\n\t}\n\n\t.stats-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\n\t\t.stats-label {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t}\n\n\t\t.stats-value {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t}\n\t}\n\n\t.review-list {\n\t\t.review-item {\n\t\t\tpadding: 30rpx 0;\n\t\t\tborder-bottom: 1rpx solid #f8f8f8;\n\n\t\t\t&:last-child {\n\t\t\t\tborder-bottom: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t.review-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.user-avatar {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder-radius: 50%;\n\t\tmargin-right: 20rpx;\n\t}\n\n\t.user-info {\n\t\tflex: 1;\n\n\t\t.user-name {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t\tdisplay: block;\n\t\t\tmargin-bottom: 8rpx;\n\t\t}\n\t}\n\n\t.review-stars {\n\t\tdisplay: flex;\n\t\tgap: 4rpx;\n\t}\n\n\t.review-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n\n\t.review-content {\n\t\tmargin-bottom: 20rpx;\n\n\t\ttext {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tline-height: 1.5;\n\t\t}\n\t}\n\n\t.review-images {\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.review-image {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 8rpx;\n\t}\n\n\t.no-reviews {\n\t\ttext-align: center;\n\t\tpadding: 60rpx 0;\n\t\t\n\t\ttext {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #999;\n\t\t}\n\t}\n\n\n\n\t/* 底部操作栏 */\n\t.bottom-actions {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbackground: #fff;\n\t\tpadding: 20rpx 30rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tbox-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t\tz-index: 100;\n\t}\n\n\t.action-left {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 30rpx;\n\t}\n\n\t.action-btn {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 8rpx;\n\t\tmin-height: 80rpx;\n\t\twidth: 80rpx;\n\n\t\t.action-icon {\n\t\t\twidth: 40rpx;\n\t\t\theight: 40rpx;\n\t\t}\n\n\t\ttext {\n\t\t\tfont-size: 20rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.action-right {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t}\n\n\t.add-cart-btn,\n\t.buy-now-btn {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t}\n\n\t.add-cart-btn {\n\t\tbackground: #FFAA00;\n\t\tcolor: #fff;\n\t\tborder: 2rpx solid #FFAA00;\n\t}\n\n\t.buy-now-btn {\n\t\tbackground: #009966;\n\t\tcolor: #fff;\n\t}\n\n\t/* 客服按钮样式重置 */\n\t.customer-service-btn {\n\t\tbackground: none !important;\n\t\tborder: none !important;\n\t\tpadding: 0 !important;\n\t\tmargin: 0 !important;\n\t\tborder-radius: 0 !important;\n\t\tbox-shadow: none !important;\n\t\toutline: none !important;\n\t\tfont-size: inherit !important;\n\t\tfont-family: inherit !important;\n\t\tline-height: inherit !important;\n\t\tcolor: inherit !important;\n\t\ttext-align: inherit !important;\n\t\tvertical-align: top !important;\n\t\t\n\t\t/* 确保图标大小一致 */\n\t\t.action-icon {\n\t\t\twidth: 40rpx !important;\n\t\t\theight: 40rpx !important;\n\t\t}\n\t\t\n\t\t/* 确保文字样式一致 */\n\t\ttext {\n\t\t\tfont-size: 20rpx !important;\n\t\t\tcolor: #666 !important;\n\t\t\tline-height: 1 !important;\n\t\t}\n\t\t\n\t\t&::after {\n\t\t\tborder: none !important;\n\t\t\tbackground: none !important;\n\t\t}\n\t}\n\n\t/* SKU选择弹窗 */\n\t.sku-popup {\n\t\tpadding: 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmax-height: 80vh;\n\t\tmin-height: 400rpx;\n\t\tbox-sizing: border-box;\n\t\tbackground: #fff;\n\t\tborder-radius: 20rpx 20rpx 0 0;\n\t}\n\n\t.sku-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 24rpx;\n\t\tpadding-bottom: 16rpx;\n\t\tborder-bottom: 1rpx solid #e9ecef;\n\t}\n\n\t.sku-product-image {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 8rpx;\n\t\tmargin-right: 16rpx;\n\t}\n\n\t.sku-product-info {\n\t\tflex: 1;\n\t}\n\n\t.sku-product-name {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 700;\n\t\tmargin-bottom: 4rpx;\n\t}\n\n\t.sku-product-price {\n\t\t.sku-price-symbol {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 600;\n\t\t}\n\n\t\t.sku-price-value {\n\t\t\tfont-size: 40rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\n\t.sku-close {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease;\n\t}\n\n\t.sku-close:active {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.sku-options {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tpadding-bottom: 20rpx;\n\t\tmin-height: 200rpx;\n\t}\n\n\t.sku-option-group {\n\t\tmargin-bottom: 32rpx;\n\t}\n\n\t.option-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.option-items {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 20rpx;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.option-item {\n\t\tbackground: #f8f9fa;\n\t\tborder: 2rpx solid #e9ecef;\n\t\tpadding: 12rpx 20rpx;\n\t\tborder-radius: 8rpx;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t}\n\n\t.option-item.active {\n\t\tborder-color: #34C759;\n\t\tbackground: #fff;\n\t\tbox-shadow: 0 0 0 2rpx rgba(52, 199, 89, 0.2);\n\t}\n\n\t.option-item.active::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 3rpx;\n\t\tbackground: linear-gradient(90deg, #34C759, #28a745);\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.option-item:active {\n\t\ttransform: scale(0.96);\n\t\tbackground: #f0f0f0;\n\t\ttransition: all 0.1s ease;\n\t}\n\n\t.option-item text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 500;\n\t\tposition: relative;\n\t\tz-index: 1;\n\t\ttransition: color 0.3s ease, font-weight 0.3s ease;\n\t}\n\n\t.option-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 4rpx;\n\t}\n\n\t.sku-price {\n\t\tfont-size: 22rpx;\n\t\tcolor: #FF6B35;\n\t\tfont-weight: 600;\n\t}\n\n\t.option-item.active text {\n\t\tcolor: #333;\n\t\tfont-weight: 600;\n\t}\n\n\t.quantity-selector {\n\t\tmargin-top: 24rpx;\n\t\tpadding-top: 24rpx;\n\t\tborder-top: 1rpx solid #e9ecef;\n\t}\n\n\t.quantity-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.quantity-control {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tbackground: #f5f5f5;\n\t\tborder-radius: 12rpx;\n\t\tpadding: 8rpx 16rpx;\n\t}\n\n\t.quantity-btn {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease;\n\t}\n\n\t.quantity-btn:active {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.quantity-value {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t}\n\n\t.sku-footer {\n\t\tmargin-top: auto;\n\t\tbackground: #ffffff;\n\t\tpadding: 24rpx 0 0 0;\n\t\tborder-top: 1rpx solid #f0f0f0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.sku-total {\n\t\t.total-price {\n\t\t\tfont-size: 36rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\n\t.sku-action {\n\t\tbackground: linear-gradient(135deg, #34C759 0%, #28a745 100%);\n\t\tpadding: 16rpx 32rpx;\n\t\tborder-radius: 12rpx;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(52, 199, 89, 0.3);\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.sku-action:active {\n\t\ttransform: scale(0.95);\n\t\tbox-shadow: 0 2rpx 8rpx rgba(52, 199, 89, 0.3);\n\t}\n\n\t.sku-action text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: 600;\n\t}\n</style>","import mod from \"-!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"; export default mod; export * from \"-!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\zhao\\\\Downloads\\\\HBuilderX.3.8.12.20230817\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1757855126616\n      var cssReload = require(\"C:/Users/zhao/Downloads/HBuilderX.3.8.12.20230817/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
=======
{"version":3,"sources":["uni-app:///main.js","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?7101","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?0d49","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?fae2","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?1080","uni-app:///subpackages/goods/detail/detail.vue","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?83b6","webpack:///F:/UniApp/products/shopping-projects/shopping_25_07/subpackages/goods/detail/detail.vue?a5ee"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","components","IconComVue","data","goodsId","statusBarHeight","capsuleHeight","capsuleTop","loading","scrollTop","scrollTopCache","showSku","skuActionType","selectedSkuIndex","quantity","skuOptions","spec","productData","currentImageIndex","productImages","activeTab","tabList","id","productName","currentPrice","originalPrice","isFavorite","salesCount","productDetailHtml","productIntroductionHtml","cartCount","reviewList","reviewStats","_skuSpecsCache","computed","headerStyle","contentTopPx","selectedSkuPrice","totalPrice","onLoad","mounted","methods","initPageLayout","onScroll","onSwiperChange","switchTab","scrollToElement","goTo","q","previewImage","uni","current","urls","previewReviewImage","goToComment","title","icon","url","toggleFavorite","params","favorFlag","res","console","formatTime","goBack","getApp","delta","shareProduct","goToService","showSkuSelector","closeSkuSelector","addToCart","buyNow","confirmSkuAction","addToCartWithSku","selectedSku","skuId","goodsNum","getSelectedSku","getSelectedSkuId","buyNowWithSku","orderData","goodsList","orderType","promotionId","globalData","fail","selectSpecValue","getSkuPrice","getCachedSkuSpecs","sku","parsedSpecs","clearSkuCache","updateSelectedSku","increaseQuantity","decreaseQuantity","fetchProductDetail","skus","processProductImages","processSkuOptions","specConfig","values","selectedValue","specOption","price","value","getSkuImage","goToCart","content","confirmText","success","phoneNumber","pageNum","pageSize","commentsRes","rawComments","goodsName","goodsImage","fullSpecs","userName","userAvatar","comment","rating","images","videoUrl","isAnonymous","merchantReply","merchantReplyTime","commentType","createTime","memberId","goodRate","totalCount","goodComments","picUrls"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC2K;AAC3K,gBAAgB,qLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpGA;AAAA;AAAA;AAAA;AAA8nB,CAAgB,wpBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC6OlpB;AAMA;AAEA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAGA;EACAC;EACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;QACAC;MACA;MAEA;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;MACAC;QACArB;QACAsB;MACA,GACA;QACAtB;QACAsB;MACA,GACA;QACAtB;QACAsB;MACA,EACA;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MAEA;MACAC;MAGA;MACAC;MAEA;MACAC;MACAC;MAEA;MACAC;IACA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IAEAC;MACA;IACA;EACA;EAEAC;IACA;IACA;MACA;IACA;EACA;EAEAC;IACA;IACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACA;MAGA;QACA;QACA;UACA;UACA;QACA;MACA;;MAGA;IAKA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACAC;MACAA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QAAA;MAAA;MACAC;QACAC;QACAC;MACA;IACA;IAEA;IACAC;MACAH;QACAC;QACAC;MACA;IACA;IAEA;IACAE;MACA;QACAJ;UACAK;UACAC;QACA;QACA;MACA;;MAEA;MACAN;QACAO;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;kBACAvD;kBACAwD;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;kBACA;kBACAX;oBACAK;oBACAC;kBACA;gBACA;kBACAN;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAM;gBACAZ;kBACAK;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAO;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;;MAEA;MACA;QACA;QACA;UACAC;QACA;QACA;QACAf;UACAO;QACA;MACA;QACA;QACAP;UACAgB;QACA;MACA;IACA;IAEA;IACAC;MACAjB;QACAK;QACAC;MACA;IACA;IAGA;IACAY;MACAlB;QACAK;QACAC;MACA;IACA;IAEA;IACAa;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAzB;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBACAG;kBACAiB;kBACAC;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAhB;gBACA;kBACAX;oBACAK;oBACAC;kBACA;kBACA;gBACA;kBACAN;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAM;gBACAZ;kBACAK;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAsB;MAAA;MACA;MACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QAAA;MAAA;MAEA;QACA;UACA;UACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAJ;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACA1B;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAGA;kBACA;kBACAyB;oBACAC;sBACAN;sBACAC;oBACA;oBACAM;oBAAA;oBACAC;kBACA,GAEA;kBACAC;kBACAA;kBAEA;oBACApB;kBACA;kBACA;kBACAf;oBACAO;oBACA6B;sBACAxB;sBACAZ;wBACAK;wBACAC;sBACA;oBACA;kBACA;kBAEA;gBACA;kBACAM;kBACAZ;oBACAK;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA+B;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MAEA;QAAA;MAAA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;YACA,uCACAC;cACAC;YAAA;UAEA;YACA7B;YACA,uCACA4B;cACAC;YAAA;UAEA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;MAEA;QACA;UACA;YACA;YACA;UACA;QACA;QAEA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACA9C;kBACAK;kBACAC;gBACA;gBAAA;cAAA;gBAAA;gBAKA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAK;gBAEA;kBACA1D,iBAEA;kBACA;;kBAEA;kBACA;kBACA;kBACA;kBACA;kBACA;;kBAEA;kBACA,qDACAA;oBACAW;oBACAmF;kBAAA,EACA;;kBAEA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA,yIACA9F,mCACA;;kBAEA;kBACA;gBAEA;kBACA+C;oBACAK;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAM;gBACAZ;kBACAK;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA0C;MACA;;MAEA;MACA;QACA;UACA;UACA;YACA;cAAA;gBACAzC;cACA;YAAA;UACA;QACA;UACA;UACA;YAAA;UAAA;UACA;YAAA;cACAA;YACA;UAAA;QACA;MACA;;MAEA;MACA;QACA;UACAA;QACA;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEA;IACA0C;MAAA;MACArC;MACAA;MAEA;QACAA;QACA;MACA;;MAEA;MACA;QACAA;QACA;MACA;MAEA;MACA;MAEAA;MACAA;;MAEA;MACA;MACA;QACA;UACAsC;UACAtC;QACA;UACAA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;MACAsC;QACAtC;QACA;UACA9D;UACAqG;UACAC;UAAA;UACAL;QACA;;QAEA;QACAjF;UACA8C;UACA;YACA;UACA;UAEAA;UAEA;YACAyC;cACA3B;cACA4B;cACA1F;cACA2F;YACA;UACA;QACA;QAEA;MACA;;MAEA;MACA;QACA;MACA;MAEA3C;IACA;IAEA;IACA4C;MACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA1C;MACA;MACA;MACAf;QACAO;MACA;IACA;EAAA,iFAGA;IACAP;MACAK;MACAqD;MACAC;MACAC;QACA;UACA5D;YACA6D;UACA;QACA;MACA;IACA;EACA,4FAGA;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,OAGA;gBACA3G;gBACA4G;gBACAC;cACA;YAAA;cAJAC;cAMApD;;cAEA;cACA;gBACA;gBACAqD,sCACA;gBACA;kBAAA;oBACA7F;oBACAlB;oBACAgH;oBACAC;oBACAzC;oBACA0C;oBAAA;oBACAC;oBACAC,8EACAC;oBACAC;oBAAA;oBACAd;oBAAA;oBACAe;oBAAA;oBACAC;oBAAA;oBACAC;oBAAA;oBACAC;oBAAA;oBACAC;oBAAA;oBACAC;oBAAA;oBACAC;oBACAC;kBACA;gBAAA;gBAEApE;;gBAEA;gBACA;kBACAqE;kBAAA;kBACAC;gBACA;;gBAEA;gBACA;kBACAC;oBAAA;kBAAA;kBACA,4FACA;gBACA;cAEA;gBACAvE;gBACA;gBACA;kBACAqE;kBACAC;gBACA;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAGAtE;cACA;cACA;cACA;gBACAqE;gBACAC;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA,8FAGAE;IACA;IAEA;MACA;MACA;QACA;QACA;UACA;UACA;YACA;cAAA;YAAA;UACA;QACA;UACA;QAAA;;QAGA;QACA;UAAA;QAAA;UAAA;QAAA;MACA;;MAEA;MACA;QACA;UAAA;QAAA;MACA;MAEA;IACA;MACAxE;MACA;IACA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;AC/kCA;AAAA;AAAA;AAAA;AAAytC,CAAgB,+rCAAG,EAAC,C;;;;;;;;;;;ACA7uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subpackages/goods/detail/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpackages/goods/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=d7166054&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7166054\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpackages/goods/detail/detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=d7166054&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.productImages.length\n  var g1 = _vm.reviewList && _vm.reviewList.length > 0\n  var l1 = g1\n    ? _vm.__map(_vm.reviewList, function (review, index) {\n        var $orig = _vm.__get_orig(review)\n        var m0 = _vm.formatTime(review.createTime)\n        var g2 =\n          review.images &&\n          review.images.length > 0 &&\n          review.images.some(function (img) {\n            return img && img.trim()\n          })\n        var l0 = g2\n          ? review.images.filter(function (img) {\n              return img && img.trim()\n            })\n          : null\n        var m1 =\n          review.merchantReply && review.merchantReplyTime\n            ? _vm.formatTime(review.merchantReplyTime)\n            : null\n        return {\n          $orig: $orig,\n          m0: m0,\n          g2: g2,\n          l0: l0,\n          m1: m1,\n        }\n      })\n    : null\n  var m2 = _vm.showSku ? _vm.getSkuImage() : null\n  var l3 = _vm.showSku\n    ? _vm.__map(_vm.skuOptions.spec, function (spec, specIndex) {\n        var $orig = _vm.__get_orig(spec)\n        var l2 = _vm.__map(spec.values, function (value, valueIndex) {\n          var $orig = _vm.__get_orig(value)\n          var m3 = _vm.getSkuPrice(specIndex, value)\n          var m4 = m3 ? _vm.getSkuPrice(specIndex, value) : null\n          return {\n            $orig: $orig,\n            m3: m3,\n            m4: m4,\n          }\n        })\n        return {\n          $orig: $orig,\n          l2: l2,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l1: l1,\n        m2: m2,\n        l3: l3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"product-detail\">\n\t\t<!-- 页面主体内容 -->\n\t\t<scroll-view scroll-y class=\"detail-body\" :scroll-top=\"scrollTop\" :scroll-with-animation=\"true\"\n\t\t\t@scroll=\"onScroll\">\n\t\t\t<!-- 1. 轮播图区域 -->\n\t\t\t<view class=\"product-banner\">\n\t\t\t\t<swiper class=\"banner-swiper\" :indicator-dots=\"false\" :autoplay=\"false\" @change=\"onSwiperChange\">\n\t\t\t\t\t<swiper-item v-for=\"(image, index) in productImages\" :key=\"index\">\n\t\t\t\t\t\t<image class=\"banner-image\" :src=\"image.url\" mode=\"aspectFill\" @click=\"previewImage(index)\">\n\t\t\t\t\t\t</image>\n\t\t\t\t\t</swiper-item>\n\t\t\t\t</swiper>\n\t\t\t</view>\n\n\t\t\t<!-- 2. Tab导航和轮播指示器 -->\n\t\t\t<view class=\"tab-nav\">\n\t\t\t\t<view class=\"tab-container\">\n\t\t\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === index }\" v-for=\"(tab, index) in tabList\"\n\t\t\t\t\t\t:key=\"index\" @click=\"switchTab(index)\">\n\t\t\t\t\t\t{{ tab.name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"swiper-indicator\">\n\t\t\t\t\t<text>{{ currentImageIndex + 1 }}/{{ productImages.length }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 3. 商品信息区域 -->\n\t\t\t<view class=\"product-info\" id=\"product-info\">\n\t\t\t\t<!-- 商品名称和收藏 -->\n\t\t\t\t<view class=\"product-header\">\n\t\t\t\t\t<view class=\"product-title\">\n\t\t\t\t\t\t<text>{{ productName }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"favorite-btn\" @click=\"toggleFavorite\">\n\t\t\t\t\t\t<u-icon :name=\"isFavorite ? 'star-fill' : 'star'\" :color=\"isFavorite ? '#ff4d4f' : '#999'\"\n\t\t\t\t\t\t\tsize=\"24\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 价格和商品数据 -->\n\t\t\t\t<view class=\"price-stats-row\">\n\t\t\t\t\t<view class=\"price-info\">\n\t\t\t\t\t\t<view class=\"current-price\">\n\t\t\t\t\t\t\t<text class=\"price-symbol\">¥</text>\n\t\t\t\t\t\t\t<text class=\"price-value\">{{ currentPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"original-price\" v-if=\"originalPrice > currentPrice\">\n\t\t\t\t\t\t\t<text>¥{{ originalPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"product-stats\">\n\t\t\t\t\t\t<view class=\"stat-item\">\n\t\t\t\t\t\t\t<text class=\"stat-label\">库存</text>\n\t\t\t\t\t\t\t<text class=\"stat-value\">{{ productData.quantity || 0 }}件</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"stat-item\">\n\t\t\t\t\t\t\t<text class=\"stat-label\">已售</text>\n\t\t\t\t\t\t\t<text class=\"stat-value\">{{ salesCount }}+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 4. 商品详情介绍 -->\n\t\t\t<view class=\"product-detail-content\" id=\"detail-content\">\n\t\t\t\t<view class=\"section-title\">商品详情</view>\n\t\t\t\t<view class=\"detail-rich-text\">\n\t\t\t\t\t<rich-text :nodes=\"productDetailHtml\"></rich-text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 5. 用户评论 -->\n\t\t\t<view class=\"product-reviews\" id=\"product-reviews\">\n\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t<text>用户评价</text>\n\t\t\t\t\t<view class=\"review-action\" @click=\"goToComment\">\n\t\t\t\t\t\t<text>查看评论</text>\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" size=\"14\" color=\"#999\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 评论统计 -->\n\t\t\t\t<view class=\"review-stats\" v-if=\"reviewStats\">\n\t\t\t\t\t<view class=\"stats-item\">\n\t\t\t\t\t\t<text class=\"stats-label\">好评率</text>\n\t\t\t\t\t\t<text class=\"stats-value\">{{ reviewStats.goodRate }}%</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"stats-item\">\n\t\t\t\t\t\t<text class=\"stats-label\">总评价</text>\n\t\t\t\t\t\t<text class=\"stats-value\">{{ reviewStats.totalCount }}条</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"review-list\" v-if=\"reviewList && reviewList.length > 0\">\n\t\t\t\t\t<view class=\"review-item\" v-for=\"(review, index) in reviewList\" :key=\"index\">\n\t\t\t\t\t\t<view class=\"review-header\">\n\t\t\t\t\t\t\t<image class=\"user-avatar\" :src=\"review.userAvatar\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"user-info\">\n\t\t\t\t\t\t\t\t<text class=\"user-name\">{{ review.userName }}</text>\n\t\t\t\t\t\t\t\t<view class=\"review-stars\">\n\t\t\t\t\t\t\t\t\t<u-icon v-for=\"star in 5\" :key=\"star\" name=\"star-fill\"\n\t\t\t\t\t\t\t\t\t\t:color=\"star <= review.rating ? '#ffa500' : '#e0e0e0'\" size=\"12\"></u-icon>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 显示商品规格信息 -->\n\t\t\t\t\t\t\t\t<text class=\"review-specs\" v-if=\"review.fullSpecs\">{{ review.fullSpecs }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"review-time\">{{ formatTime(review.createTime) }}</text>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 评论内容 -->\n\t\t\t\t\t\t<view class=\"review-content\">\n\t\t\t\t\t\t\t<text>{{ review.content }}</text>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 评论图片 - 只有图片存在且不为空时才显示 -->\n\t\t\t\t\t\t<view class=\"review-images\"\n\t\t\t\t\t\t\tv-if=\"review.images && review.images.length > 0 && review.images.some(img => img && img.trim())\">\n\t\t\t\t\t\t\t<image v-for=\"(img, imgIndex) in review.images.filter(img => img && img.trim())\"\n\t\t\t\t\t\t\t\t:key=\"imgIndex\" class=\"review-image\" :src=\"img\" mode=\"aspectFill\"\n\t\t\t\t\t\t\t\t@click=\"previewReviewImage(review.images, imgIndex)\">\n\t\t\t\t\t\t\t</image>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<!-- 商家回复 -->\n\t\t\t\t\t\t<view class=\"merchant-reply\" v-if=\"review.merchantReply\">\n\t\t\t\t\t\t\t<view class=\"reply-header\">\n\t\t\t\t\t\t\t\t<text class=\"reply-label\">商家回复：</text>\n\t\t\t\t\t\t\t\t<text class=\"reply-time\"\n\t\t\t\t\t\t\t\t\tv-if=\"review.merchantReplyTime\">{{ formatTime(review.merchantReplyTime) }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"reply-content\">{{ review.merchantReply }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 暂无评论 -->\n\t\t\t\t<view class=\"no-reviews\" v-else>\n\t\t\t\t\t<text>暂无评论，快来做第一个评论的人吧~</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 6. 底部富文本介绍 -->\n\t\t\t<view class=\"product-introduction\">\n\t\t\t\t<view class=\"introduction-rich-text\">\n\t\t\t\t\t<rich-text :nodes=\"productIntroductionHtml\"></rich-text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t<IconComVue />\n\t\t<!-- SKU选择弹窗 -->\n\t\t<u-popup v-if=\"showSku\" :show=\"showSku\" @close=\"closeSkuSelector\" mode=\"bottom\" :round=\"20\" :overlay=\"true\"\n\t\t\t:closeOnClickOverlay=\"true\" :safeAreaInsetBottom=\"true\">\n\t\t\t<view class=\"sku-popup\">\n\t\t\t\t<view class=\"sku-header\">\n\t\t\t\t\t<image class=\"sku-product-image\" :src=\"getSkuImage()\" mode=\"aspectFill\"></image>\n\t\t\t\t\t<view class=\"sku-product-info\">\n\t\t\t\t\t\t<text class=\"sku-product-name\">{{ productName }}</text>\n\t\t\t\t\t\t<view class=\"sku-product-price\">\n\t\t\t\t\t\t\t<text class=\"sku-price-symbol\">¥</text>\n\t\t\t\t\t\t\t<text class=\"sku-price-value\">{{ selectedSkuPrice }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"sku-close\" @click=\"closeSkuSelector\">\n\t\t\t\t\t\t<u-icon name=\"close\" color=\"#999\" size=\"20\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"sku-options\">\n\t\t\t\t\t<view class=\"sku-option-group\" v-for=\"(spec, specIndex) in skuOptions.spec\" :key=\"specIndex\">\n\t\t\t\t\t\t<text class=\"option-title\">{{ spec.name }}</text>\n\t\t\t\t\t\t<view class=\"option-items\">\n\t\t\t\t\t\t\t<view class=\"option-item\" v-for=\"(value, valueIndex) in spec.values\" :key=\"valueIndex\"\n\t\t\t\t\t\t\t\t:class=\"{ active: spec.selectedValue === value }\"\n\t\t\t\t\t\t\t\t@click=\"selectSpecValue(specIndex, value)\">\n\t\t\t\t\t\t\t\t<view class=\"option-content\">\n\t\t\t\t\t\t\t\t\t<text>{{ value }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"sku-price\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"getSkuPrice(specIndex, value)\">¥{{ getSkuPrice(specIndex, value) }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"quantity-selector\">\n\t\t\t\t\t\t<text class=\"quantity-title\">数量</text>\n\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"decreaseQuantity\">\n\t\t\t\t\t\t\t\t<u-icon name=\"minus\" color=\"#666\" size=\"16\"></u-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"quantity-value\">{{ quantity }}</text>\n\t\t\t\t\t\t\t<view class=\"quantity-btn\" @click=\"increaseQuantity\">\n\t\t\t\t\t\t\t\t<u-icon name=\"plus\" color=\"#666\" size=\"16\"></u-icon>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"sku-footer\">\n\t\t\t\t\t<view class=\"sku-total\">\n\t\t\t\t\t\t<text>总计：</text>\n\t\t\t\t\t\t<text class=\"total-price\">¥{{ totalPrice }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"sku-action\" @click=\"confirmSkuAction\">\n\t\t\t\t\t\t<text>{{ skuActionType === 'cart' ? '加入购物车' : '确认购买' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-popup>\n\n\t\t<!-- 底部操作栏 -->\n\t\t<view class=\"bottom-actions\">\n\t\t\t<view class=\"action-left\">\n\t\t\t\t<view class=\"action-btn\" @click=\"goToCart\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/images/gwc.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>购物车</text>\n\t\t\t\t</view>\n\t\t\t\t<button class=\"action-btn customer-service-btn\" open-type=\"contact\" hover-class=\"none\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/images/wdkf.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text>客服</text>\n\t\t\t\t</button>\n\t\t\t\t<view class=\"action-btn\" @click=\"toggleFavorite\">\n\t\t\t\t\t<u-icon :name=\"isFavorite ? 'star-fill' : 'star'\" :color=\"isFavorite ? '#ff4d4f' : '#666'\"\n\t\t\t\t\t\tsize=\"20\"></u-icon>\n\t\t\t\t\t<text>收藏</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"action-right\">\n\t\t\t\t<view class=\"add-cart-btn\" @click=\"addToCart\">加入购物车</view>\n\t\t\t\t<view class=\"buy-now-btn\" @click=\"buyNow\">立即购买</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport {\n\t\tfetchGoodsDetail,\n\t\tchangeGoodsFavor,\n\t\tfetchGoodsCommentList\n\t} from '@/api/goods'\n\n\timport {\n\t\tAddCart\n\t} from '@/api/cart'\n\timport IconComVue from '@/components/IconCom.vue'\n\n\texport default {\n\t\tname: 'ProductDetail',\n\t\tcomponents: {\n\t\t\tIconComVue\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 商品ID\n\t\t\t\tgoodsId: null,\n\n\t\t\t\t// 顶部安全区域\n\t\t\t\tstatusBarHeight: 0,\n\t\t\t\tcapsuleHeight: 44,\n\t\t\t\tcapsuleTop: 0,\n\n\t\t\t\t// 页面状态\n\t\t\t\tloading: false,\n\t\t\t\tscrollTop: 0, // scroll-view的滚动位置\n\t\t\t\tscrollTopCache: 0, // 滚动位置缓存\n\n\t\t\t\t// SKU相关\n\t\t\t\tshowSku: false,\n\t\t\t\tskuActionType: 'cart', // 'cart' 或 'buy'\n\t\t\t\tselectedSkuIndex: 0,\n\t\t\t\tquantity: 1,\n\t\t\t\tskuOptions: {\n\t\t\t\t\tspec: []\n\t\t\t\t},\n\n\t\t\t\t// 商品数据\n\t\t\t\tproductData: null,\n\n\t\t\t\t// 轮播相关\n\t\t\t\tcurrentImageIndex: 0,\n\t\t\t\tproductImages: [],\n\n\t\t\t\t// Tab导航\n\t\t\t\tactiveTab: 0,\n\t\t\t\ttabList: [{\n\t\t\t\t\t\tname: '商品',\n\t\t\t\t\t\tid: 'product-info'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '详情',\n\t\t\t\t\t\tid: 'detail-content'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '评价',\n\t\t\t\t\t\tid: 'product-reviews'\n\t\t\t\t\t}\n\t\t\t\t],\n\n\t\t\t\t// 商品信息\n\t\t\t\tproductName: '',\n\t\t\t\tcurrentPrice: 0,\n\t\t\t\toriginalPrice: 0,\n\t\t\t\tisFavorite: false,\n\t\t\t\tsalesCount: 0,\n\n\t\t\t\t// 商品详情HTML\n\t\t\t\tproductDetailHtml: '',\n\n\t\t\t\t// 底部富文本介绍HTML\n\t\t\t\tproductIntroductionHtml: '',\n\n\n\t\t\t\t// 购物车数量\n\t\t\t\tcartCount: 0,\n\n\t\t\t\t// 评论相关\n\t\t\t\treviewList: [],\n\t\t\t\treviewStats: null,\n\n\t\t\t\t// 缓存解析后的SKU规格数据\n\t\t\t\t_skuSpecsCache: null\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\t// 顶部标题栏样式\n\t\t\theaderStyle() {\n\t\t\t\treturn `padding-top:${this.capsuleTop}px;background:#fff;`\n\t\t\t},\n\n\t\t\t// 内容区顶部偏移\n\t\t\tcontentTopPx() {\n\t\t\t\treturn this.capsuleTop + this.capsuleHeight\n\t\t\t},\n\n\t\t\t// SKU相关计算属性\n\t\t\tselectedSkuPrice() {\n\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\tif (selectedSku) {\n\t\t\t\t\t// 优先使用促销价格，其次使用原价\n\t\t\t\t\treturn selectedSku.promotionPrice || selectedSku.price || this.currentPrice\n\t\t\t\t}\n\t\t\t\treturn this.currentPrice || 0\n\t\t\t},\n\n\t\t\ttotalPrice() {\n\t\t\t\treturn (this.selectedSkuPrice * this.quantity).toFixed(2)\n\t\t\t}\n\t\t},\n\n\t\tonLoad(options) {\n\t\t\t// 获取商品ID\n\t\t\tif (options.goodsId) {\n\t\t\t\tthis.goodsId = options.goodsId\n\t\t\t}\n\t\t},\n\n\t\tmounted() {\n\t\t\tthis.initPageLayout()\n\t\t\t// 获取商品详情数据\n\t\t\tthis.fetchProductDetail()\n\t\t},\n\n\t\tmethods: {\n\t\t\t// 初始化页面布局\n\t\t\tinitPageLayout() {\n\t\t\t\tconst sys = uni.getSystemInfoSync()\n\t\t\t\tthis.statusBarHeight = sys.statusBarHeight || 0\n\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\ttry {\n\t\t\t\t\tconst rect = wx.getMenuButtonBoundingClientRect()\n\t\t\t\t\tif (rect && rect.height) {\n\t\t\t\t\t\tthis.capsuleHeight = rect.height\n\t\t\t\t\t\tthis.capsuleTop = rect.top\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t\t// #endif\n\n\t\t\t\t// 其他端给个合理默认\n\t\t\t\t// #ifndef MP-WEIXIN\n\t\t\t\tthis.capsuleHeight = 44\n\t\t\t\tthis.capsuleTop = this.statusBarHeight\n\t\t\t\t// #endif\n\t\t\t},\n\n\t\t\t// scroll-view滚动事件\n\t\t\tonScroll(e) {\n\t\t\t\tthis.scrollTopCache = e.detail.scrollTop\n\t\t\t},\n\n\t\t\t// 轮播图切换\n\t\t\tonSwiperChange(e) {\n\t\t\t\tthis.currentImageIndex = e.detail.current\n\t\t\t},\n\n\t\t\t// Tab切换\n\t\t\tswitchTab(index) {\n\t\t\t\tthis.activeTab = index\n\t\t\t\tconst targetId = this.tabList[index].id\n\t\t\t\tthis.scrollToElement(targetId)\n\t\t\t},\n\n\t\t\t// 滚动到指定元素\n\t\t\tscrollToElement(elementId) {\n\t\t\t\tthis.goTo(`#${elementId}`)\n\t\t\t},\n\n\t\t\t// 使用scroll-view的滚动方法\n\t\t\tgoTo(selector) {\n\t\t\t\tconst q = uni.createSelectorQuery().in(this)\n\t\t\t\tq.select(selector).boundingClientRect()\n\t\t\t\tq.exec(rects => {\n\t\t\t\t\tconst sec = rects?.[0]\n\t\t\t\t\tif (!sec) return\n\t\t\t\t\t// 计算目标位置，考虑当前滚动位置和留出间距\n\t\t\t\t\tconst targetScrollTop = sec.top + this.scrollTopCache - uni.upx2px(20)\n\t\t\t\t\t// 设置scroll-view的滚动位置\n\t\t\t\t\tthis.scrollTop = Math.max(targetScrollTop, 0)\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 预览图片\n\t\t\tpreviewImage(index) {\n\t\t\t\tconst urls = this.productImages.map(img => img.url)\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index,\n\t\t\t\t\turls: urls\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 预览评论图片\n\t\t\tpreviewReviewImage(images, index) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index,\n\t\t\t\t\turls: images\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 跳转到评论页面\n\t\t\tgoToComment() {\n\t\t\t\tif (!this.productData) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品信息加载中',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// 跳转到评论列表页面\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/subpackages/goods/commentsList/commentsList?goodsId=${this.goodsId}&goodsName=${encodeURIComponent(this.productName)}`\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 切换收藏状态\n\t\t\tasync toggleFavorite() {\n\t\t\t\ttry {\n\t\t\t\t\t// TODO changeGoodsFavor 会在这里使用\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tgoodsId: this.goodsId,\n\t\t\t\t\t\tfavorFlag: this.isFavorite ? 0 : 1 // 0取消收藏，1收藏\n\t\t\t\t\t}\n\n\t\t\t\t\tconst res = await changeGoodsFavor(params)\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.isFavorite = !this.isFavorite\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: this.isFavorite ? '已收藏' : '已取消收藏',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '操作失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('收藏操作失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '操作失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 格式化时间\n\t\t\tformatTime(timeStr) {\n\t\t\t\tif (!timeStr) return ''\n\t\t\t\ttry {\n\t\t\t\t\tconst date = new Date(timeStr)\n\t\t\t\t\tconst year = date.getFullYear()\n\t\t\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0')\n\t\t\t\t\tconst day = String(date.getDate()).padStart(2, '0')\n\t\t\t\t\treturn `${year}-${month}-${day}`\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn timeStr\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 返回上一页\n\t\t\tgoBack() {\n\t\t\t\t// 获取当前页面栈\n\t\t\t\tconst pages = getCurrentPages()\n\n\t\t\t\t// 如果页面栈只有1页或者没有上一页，跳转到首页\n\t\t\t\tif (pages.length <= 1) {\n\t\t\t\t\t// 设置全局下标为0\n\t\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\t\tgetApp().globalData.activeTabbarKey = 0\n\t\t\t\t\t}\n\t\t\t\t\t// 跳转到首页\n\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// 有上一页，正常返回\n\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 分享商品\n\t\t\tshareProduct() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '分享功能',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t},\n\n\n\t\t\t// 跳转客服\n\t\t\tgoToService() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '客服功能',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 显示SKU选择器\n\t\t\tshowSkuSelector(type) {\n\t\t\t\tthis.skuActionType = type\n\t\t\t\tthis.showSku = true\n\t\t\t},\n\n\t\t\t// 关闭SKU选择器\n\t\t\tcloseSkuSelector() {\n\t\t\t\tthis.showSku = false\n\t\t\t},\n\n\t\t\t// 加入购物车\n\t\t\taddToCart() {\n\t\t\t\tthis.showSkuSelector('cart')\n\t\t\t},\n\n\t\t\t// 立即购买\n\t\t\tbuyNow() {\n\t\t\t\tthis.showSkuSelector('buy')\n\t\t\t},\n\n\t\t\t// 确认SKU操作\n\t\t\tasync confirmSkuAction() {\n\t\t\t\tif (this.skuActionType === 'cart') {\n\t\t\t\t\t// 加入购物车\n\t\t\t\t\tawait this.addToCartWithSku()\n\t\t\t\t} else {\n\t\t\t\t\t// 立即购买 - 跳转订单页面\n\t\t\t\t\tawait this.buyNowWithSku()\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 带SKU的加入购物车\n\t\t\tasync addToCartWithSku() {\n\t\t\t\ttry {\n\t\t\t\t\t// 获取选中的SKU\n\t\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\t\tif (!selectedSku || !selectedSku.skuId) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '商品信息异常，请重试',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO AddCart 会在这里使用\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tskuId: selectedSku.skuId,\n\t\t\t\t\t\tgoodsNum: this.quantity\n\t\t\t\t\t}\n\n\t\t\t\t\tconst res = await AddCart(params)\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '加入购物车成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.closeSkuSelector()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '加入购物车失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加入购物车失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '加入购物车失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 获取选中的SKU\n\t\t\tgetSelectedSku() {\n\t\t\t\t// 检查productData是否存在\n\t\t\t\tif (!this.productData || !this.productData.skus || this.productData.skus.length === 0) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\t// 如果没有规格选项，返回第一个SKU\n\t\t\t\tif (!this.skuOptions.spec || this.skuOptions.spec.length === 0) {\n\t\t\t\t\treturn this.productData.skus[0]\n\t\t\t\t}\n\n\t\t\t\t// 根据选中的规格找到对应的SKU\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\n\n\t\t\t\tconst matchedSku = this.productData.skus.find(sku => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst fullSpecs = JSON.parse(sku.fullSpecs || '{}')\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\n\t\t\t\t\t\t\treturn fullSpecs[specName] === value\n\t\t\t\t\t\t})\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// 如果找不到匹配的SKU，返回第一个\n\t\t\t\treturn matchedSku || this.productData.skus[0]\n\t\t\t},\n\n\t\t\t// 获取选中的SKU ID\n\t\t\tgetSelectedSkuId() {\n\t\t\t\tconst selectedSku = this.getSelectedSku()\n\t\t\t\treturn selectedSku ? selectedSku.skuId : null\n\t\t\t},\n\n\t\t\t// 带SKU的立即购买\n\t\t\tasync buyNowWithSku() {\n\t\t\t\tconst skuId = this.getSelectedSkuId()\n\t\t\t\tif (!skuId) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请选择商品规格',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\t// 构建订单数据（符合接口要求的格式）\n\t\t\t\t\tconst orderData = {\n\t\t\t\t\t\tgoodsList: [{\n\t\t\t\t\t\t\tskuId: skuId,\n\t\t\t\t\t\t\tgoodsNum: this.quantity\n\t\t\t\t\t\t}],\n\t\t\t\t\t\torderType: 1, // 普通订单\n\t\t\t\t\t\tpromotionId: null // 无促销活动\n\t\t\t\t\t}\n\n\t\t\t\t\t// 将订单数据存储到全局数据中\n\t\t\t\t\tconst globalData = require('@/utils/globalData.js').default\n\t\t\t\t\tglobalData.orderData = orderData\n\n\t\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\t\tgetApp().globalData.orderData = orderData\n\t\t\t\t\t}\n\t\t\t\t\t// 跳转到订单确认页面\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/subpackages/order/detail/detail',\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('页面跳转失败:', err)\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '页面跳转失败，请重试',\n\t\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.closeSkuSelector()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('预览订单失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '网络错误，请重试',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 选择规格值\n\t\t\tselectSpecValue(specIndex, value) {\n\t\t\t\tthis.skuOptions.spec[specIndex].selectedValue = value\n\t\t\t\tthis.updateSelectedSku()\n\t\t\t},\n\n\t\t\t// 获取SKU价格\n\t\t\tgetSkuPrice(specIndex, value) {\n\t\t\t\tconst spec = this.skuOptions.spec[specIndex]\n\t\t\t\tif (!spec || !spec.skus) return null\n\n\t\t\t\tconst sku = spec.skus.find(s => s.value === value)\n\t\t\t\treturn sku ? sku.price : null\n\t\t\t},\n\n\t\t\t// 获取缓存的SKU规格数据\n\t\t\tgetCachedSkuSpecs() {\n\t\t\t\tif (!this._skuSpecsCache && this.productData && this.productData.skus) {\n\t\t\t\t\tthis._skuSpecsCache = this.productData.skus.map(sku => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...sku,\n\t\t\t\t\t\t\t\tparsedSpecs: JSON.parse(sku.fullSpecs)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('解析SKU规格失败:', error)\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...sku,\n\t\t\t\t\t\t\t\tparsedSpecs: {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn this._skuSpecsCache\n\t\t\t},\n\n\t\t\t// 清理SKU缓存\n\t\t\tclearSkuCache() {\n\t\t\t\tthis._skuSpecsCache = null\n\t\t\t},\n\n\t\t\t// 更新选中的SKU\n\t\t\tupdateSelectedSku() {\n\t\t\t\t// 根据当前选择的规格值找到对应的SKU\n\t\t\t\tconst selectedSpecs = this.skuOptions.spec.map(spec => spec.selectedValue)\n\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\n\n\t\t\t\tif (cachedSkus && cachedSkus.length > 0) {\n\t\t\t\t\tconst matchingSku = cachedSkus.find(sku => {\n\t\t\t\t\t\treturn selectedSpecs.every((value, index) => {\n\t\t\t\t\t\t\tconst specName = this.skuOptions.spec[index].name\n\t\t\t\t\t\t\treturn sku.parsedSpecs[specName] === value\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\tif (matchingSku) {\n\t\t\t\t\t\tthis.selectedSkuIndex = this.productData.skus.indexOf(matchingSku)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 增加数量\n\t\t\tincreaseQuantity() {\n\t\t\t\tif (this.quantity < 99) {\n\t\t\t\t\tthis.quantity++\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 减少数量\n\t\t\tdecreaseQuantity() {\n\t\t\t\tif (this.quantity > 1) {\n\t\t\t\t\tthis.quantity--\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 获取商品详情数据\n\t\t\tasync fetchProductDetail() {\n\t\t\t\tif (!this.goodsId) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '商品ID不存在',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.loading = true\n\t\t\t\t\t// TODO fetchGoodsDetail 会在这里使用\n\t\t\t\t\tconst res = await fetchGoodsDetail(this.goodsId)\n\n\t\t\t\t\tif (res.code === 200 && res.data) {\n\t\t\t\t\t\tconst data = res.data\n\n\t\t\t\t\t\t// 清理旧的SKU缓存\n\t\t\t\t\t\tthis.clearSkuCache()\n\n\t\t\t\t\t\t// 设置商品基本信息\n\t\t\t\t\t\tthis.productName = data.goodsName || '商品名称'\n\t\t\t\t\t\tthis.currentPrice = data.promotionPrice || data.price || 0\n\t\t\t\t\t\tthis.originalPrice = data.originPrice || data.price || 0\n\t\t\t\t\t\tthis.isFavorite = data.isFavor === 1\n\t\t\t\t\t\tthis.salesCount = data.soldNum || 0\n\n\t\t\t\t\t\t// 设置商品数据\n\t\t\t\t\t\tthis.productData = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tquantity: data.quantity || 0,\n\t\t\t\t\t\t\tskus: data.skus || []\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// 处理商品图片\n\t\t\t\t\t\tthis.processProductImages(data)\n\n\t\t\t\t\t\t// 处理SKU选项\n\t\t\t\t\t\tthis.processSkuOptions(data)\n\n\t\t\t\t\t\t// 设置商品详情HTML\n\t\t\t\t\t\tthis.productDetailHtml = data.details || '<p>暂无详细介绍</p>'\n\n\t\t\t\t\t\t// 设置商品介绍HTML\n\t\t\t\t\t\tthis.productIntroductionHtml = data.sellingPoint ?\n\t\t\t\t\t\t\t`<div style=\"padding: 20px; line-height: 1.6;\"><p style=\"color: #666;\">${data.sellingPoint}</p></div>` :\n\t\t\t\t\t\t\t'<div style=\"padding: 20px; line-height: 1.6;\"><p style=\"color: #666;\">暂无商品介绍</p></div>'\n\n\t\t\t\t\t\t// 加载评论数据\n\t\t\t\t\t\tthis.loadCommentsData()\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.msg || '获取商品详情失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('获取商品详情失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取商品详情失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 处理商品图片\n\t\t\tprocessProductImages(data) {\n\t\t\t\tthis.productImages = []\n\n\t\t\t\t// 处理轮播图\n\t\t\t\tif (data.goodsImages) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst images = JSON.parse(data.goodsImages)\n\t\t\t\t\t\tif (Array.isArray(images)) {\n\t\t\t\t\t\t\tthis.productImages = images.map(url => ({\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// 如果解析失败，尝试按逗号分割\n\t\t\t\t\t\tconst images = data.goodsImages.split(',').filter(url => url.trim())\n\t\t\t\t\t\tthis.productImages = images.map(url => ({\n\t\t\t\t\t\t\turl: url.trim()\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 如果没有轮播图，使用主图\n\t\t\t\tif (this.productImages.length === 0 && data.goodsImage) {\n\t\t\t\t\tthis.productImages = [{\n\t\t\t\t\t\turl: data.goodsImage\n\t\t\t\t\t}]\n\t\t\t\t}\n\n\t\t\t\t// 如果还是没有图片，保持空数组\n\t\t\t\tif (this.productImages.length === 0) {\n\t\t\t\t\tthis.productImages = []\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 处理SKU选项\n\t\t\tprocessSkuOptions(data) {\n\t\t\t\tconsole.log('开始处理SKU选项')\n\t\t\t\tconsole.log('productData:', data)\n\n\t\t\t\tif (!data || !data.skus) {\n\t\t\t\t\tconsole.log('没有SKU数据')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// 如果已经处理过，直接返回\n\t\t\t\tif (this.skuOptions.spec.length > 0) {\n\t\t\t\t\tconsole.log('SKU选项已处理，跳过重复处理')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst skus = data.skus\n\t\t\t\tconst specOptions = data.specOptions\n\n\t\t\t\tconsole.log('原始SKU数据:', skus)\n\t\t\t\tconsole.log('规格配置:', specOptions)\n\n\t\t\t\t// 解析规格选项配置\n\t\t\t\tlet specConfig = []\n\t\t\t\tif (specOptions) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tspecConfig = JSON.parse(specOptions)\n\t\t\t\t\t\tconsole.log('解析后的规格配置:', specConfig)\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('解析规格配置失败:', error)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 重新构建SKU选项结构\n\t\t\t\tthis.skuOptions.spec = []\n\n\t\t\t\t// 使用缓存的SKU规格数据\n\t\t\t\tconst cachedSkus = this.getCachedSkuSpecs()\n\n\t\t\t\t// 根据规格配置创建选项\n\t\t\t\tspecConfig.forEach(spec => {\n\t\t\t\t\tconsole.log('处理规格:', spec)\n\t\t\t\t\tconst specOption = {\n\t\t\t\t\t\tname: spec.attrName,\n\t\t\t\t\t\tvalues: spec.attrValue,\n\t\t\t\t\t\tselectedValue: spec.attrValue[0], // 默认选择第一个\n\t\t\t\t\t\tskus: []\n\t\t\t\t\t}\n\n\t\t\t\t\t// 为每个规格值找到对应的SKU\n\t\t\t\t\tspec.attrValue.forEach(value => {\n\t\t\t\t\t\tconsole.log('查找规格值:', value)\n\t\t\t\t\t\tconst matchingSkus = cachedSkus.filter(sku => {\n\t\t\t\t\t\t\treturn sku.parsedSpecs[spec.attrName] === value\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tconsole.log('匹配的SKU:', matchingSkus)\n\n\t\t\t\t\t\tif (matchingSkus.length > 0) {\n\t\t\t\t\t\t\tspecOption.skus.push({\n\t\t\t\t\t\t\t\tskuId: matchingSkus[0].skuId,\n\t\t\t\t\t\t\t\tprice: matchingSkus[0].price,\n\t\t\t\t\t\t\t\tquantity: matchingSkus[0].quantity,\n\t\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.skuOptions.spec.push(specOption)\n\t\t\t\t})\n\n\t\t\t\t// 如果有SKU数据，使用第一个SKU的价格作为默认价格\n\t\t\t\tif (skus.length > 0) {\n\t\t\t\t\tthis.selectedSkuIndex = 0\n\t\t\t\t}\n\n\t\t\t\tconsole.log('处理后的SKU选项:', this.skuOptions.spec)\n\t\t\t},\n\n\t\t\t// 获取SKU弹窗中的商品图片\n\t\t\tgetSkuImage() {\n\t\t\t\tif (this.productImages && this.productImages.length > 0 && this.productImages[0]) {\n\t\t\t\t\treturn this.productImages[0].url || ''\n\t\t\t\t}\n\t\t\t\treturn ''\n\t\t\t},\n\n\t\t\t// 跳转到购物车\n\t\t\tgoToCart() {\n\t\t\t\t// 设置全局tabbar索引为2（购物车）\n\t\t\t\tif (getApp().globalData) {\n\t\t\t\t\tgetApp().globalData.activeTabbarKey = 2\n\t\t\t\t}\n\t\t\t\t// 跳转到首页，购物车会通过v-if渲染\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 联系客服\n\t\t\tgoToService() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '联系客服',\n\t\t\t\t\tcontent: '请拨打客服热线：400-123-4567',\n\t\t\t\t\tconfirmText: '拨打',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.makePhoneCall({\n\t\t\t\t\t\t\t\tphoneNumber: '400-123-4567'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\t// 加载评论数据\n\t\t\tasync loadCommentsData() {\n\t\t\t\ttry {\n\t\t\t\t\t// 使用 fetchGoodsCommentList 获取评论列表\n\t\t\t\t\tconst commentsRes = await fetchGoodsCommentList({\n\t\t\t\t\t\tgoodsId: this.goodsId,\n\t\t\t\t\t\tpageNum: 1,\n\t\t\t\t\t\tpageSize: 52\n\t\t\t\t\t})\n\n\t\t\t\t\tconsole.log('评论接口返回数据:', commentsRes)\n\n\t\t\t\t\t// 处理评论列表\n\t\t\t\t\tif (commentsRes.code === 200 && commentsRes.rows) {\n\t\t\t\t\t\t// 适配API返回的数据结构：data.rows\n\t\t\t\t\t\tconst rawComments = commentsRes.rows || []\n\t\t\t\t\t\t// 格式化评论数据，适配新的接口字段\n\t\t\t\t\t\tthis.reviewList = rawComments.map(comment => ({\n\t\t\t\t\t\t\tid: comment.id,\n\t\t\t\t\t\t\tgoodsId: comment.goodsId,\n\t\t\t\t\t\t\tgoodsName: comment.goodsName,\n\t\t\t\t\t\t\tgoodsImage: comment.goodsImage,\n\t\t\t\t\t\t\tskuId: comment.skuId,\n\t\t\t\t\t\t\tfullSpecs: comment.fullSpecs, // 规格信息\n\t\t\t\t\t\t\tuserName: comment.isAnonymous === 1 ? '匿名用户' : (comment.nickname || '用户'),\n\t\t\t\t\t\t\tuserAvatar: comment.isAnonymous === 1 ? '/static/images/default-avatar.png' : (\n\t\t\t\t\t\t\t\tcomment.avatarUrl || '/static/images/default-avatar.png'),\n\t\t\t\t\t\t\trating: comment.score || 5, // 评分\n\t\t\t\t\t\t\tcontent: comment.content || '', // 评价内容\n\t\t\t\t\t\t\timages: this.parseCommentImages(comment.picUrls), // 图片处理\n\t\t\t\t\t\t\tvideoUrl: comment.videoUrl, // 视频链接\n\t\t\t\t\t\t\tisAnonymous: comment.isAnonymous === 1, // 是否匿名\n\t\t\t\t\t\t\tmerchantReply: comment.merchantReply, // 商家回复\n\t\t\t\t\t\t\tmerchantReplyTime: comment.merchantReplyTime, // 商家回复时间\n\t\t\t\t\t\t\tcommentType: comment.commentType, // 评论类型\n\t\t\t\t\t\t\tcreateTime: comment.createTime,\n\t\t\t\t\t\t\tmemberId: comment.memberId\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tconsole.log('格式化后的评论数据:', this.reviewList)\n\n\t\t\t\t\t\t// 处理评论统计 - 从接口返回的total字段计算\n\t\t\t\t\t\tthis.reviewStats = {\n\t\t\t\t\t\t\tgoodRate: 95, // 默认好评率，可以根据实际评分计算\n\t\t\t\t\t\t\ttotalCount: commentsRes.total || this.reviewList.length\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// 如果有评论数据，计算实际好评率\n\t\t\t\t\t\tif (this.reviewList.length > 0) {\n\t\t\t\t\t\t\tconst goodComments = this.reviewList.filter(comment => comment.rating >= 4)\n\t\t\t\t\t\t\tthis.reviewStats.goodRate = Math.round((goodComments.length / this.reviewList.length) *\n\t\t\t\t\t\t\t\t100)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('评论接口返回错误:', commentsRes)\n\t\t\t\t\t\tthis.reviewList = []\n\t\t\t\t\t\tthis.reviewStats = {\n\t\t\t\t\t\t\tgoodRate: 0,\n\t\t\t\t\t\t\ttotalCount: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载评论数据失败:', error)\n\t\t\t\t\t// 设置空数据，不显示错误提示\n\t\t\t\t\tthis.reviewList = []\n\t\t\t\t\tthis.reviewStats = {\n\t\t\t\t\t\tgoodRate: 0,\n\t\t\t\t\t\ttotalCount: 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// 解析评论图片 - 适配picUrls字段（逗号分隔）\n\t\t\tparseCommentImages(picUrls) {\n\t\t\t\tif (!picUrls) return []\n\n\t\t\t\ttry {\n\t\t\t\t\t// 如果是字符串，按逗号分隔处理\n\t\t\t\t\tif (typeof picUrls === 'string') {\n\t\t\t\t\t\t// 先尝试JSON解析\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst parsed = JSON.parse(picUrls)\n\t\t\t\t\t\t\tif (Array.isArray(parsed)) {\n\t\t\t\t\t\t\t\treturn parsed.filter(img => img && img.trim())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// JSON解析失败，按逗号分隔处理\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// 按逗号分隔并过滤空值\n\t\t\t\t\t\treturn picUrls.split(',').map(img => img.trim()).filter(img => img)\n\t\t\t\t\t}\n\n\t\t\t\t\t// 如果已经是数组，直接返回\n\t\t\t\t\tif (Array.isArray(picUrls)) {\n\t\t\t\t\t\treturn picUrls.filter(img => img && img.trim())\n\t\t\t\t\t}\n\n\t\t\t\t\treturn []\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('解析评论图片失败:', error)\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.product-detail {\n\t\theight: 100vh;\n\t\tbackground: #f5f5f5;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t/* 固定顶部标题栏 */\n\t.detail-header {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 999;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\n\t}\n\n\t.header-content {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tjustify-content: center;\n\t\tpadding: 0 30rpx 16rpx 30rpx;\n\t\tposition: relative;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.header-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #111;\n\t}\n\n\t.header-left {\n\t\tposition: absolute;\n\t\tleft: 30rpx;\n\t\tbottom: 16rpx;\n\t}\n\n\t.cart-badge {\n\t\tposition: absolute;\n\t\ttop: -8rpx;\n\t\tright: -8rpx;\n\t\tbackground: #ff4d4f;\n\t\tcolor: #fff;\n\t\tfont-size: 20rpx;\n\t\tpadding: 2rpx 6rpx;\n\t\tborder-radius: 10rpx;\n\t\tmin-width: 16rpx;\n\t\ttext-align: center;\n\t}\n\n\t/* 页面主体 */\n\t.detail-body {\n\t\tflex: 1;\n\t\theight: 0;\n\t\tpadding-bottom: 120rpx;\n\t}\n\n\t/* 轮播图区域 */\n\t.product-banner {\n\t\tposition: relative;\n\t\theight: 600rpx;\n\t\tbackground: #fff;\n\t}\n\n\t.banner-swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.banner-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.swiper-indicator {\n\t\tposition: absolute;\n\t\tbottom: 20rpx;\n\t\tright: 20rpx;\n\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\tcolor: #fff;\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 20rpx;\n\t\tfont-size: 24rpx;\n\t}\n\n\t/* Tab导航 */\n\t.tab-nav {\n\t\tbackground: #f5f5f5;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 20rpx 30rpx;\n\t\tposition: relative;\n\t}\n\n\t.tab-container {\n\t\tdisplay: flex;\n\t\tbackground: #e0e0e0;\n\t\tborder-radius: 25rpx;\n\t\tpadding: 4rpx;\n\t\tposition: relative;\n\t}\n\n\t.tab-item {\n\t\tpadding: 16rpx 32rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tborder-radius: 21rpx;\n\t\ttransition: all 0.3s ease;\n\t\tposition: relative;\n\t\tz-index: 2;\n\n\t\t&.active {\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t\tbackground: #fff;\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t\t}\n\t}\n\n\t.swiper-indicator {\n\t\tposition: absolute;\n\t\tright: 30rpx;\n\t\ttop: 40rpx;\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tcolor: #fff;\n\t\tpadding: 12rpx 20rpx;\n\t\tborder-radius: 25rpx;\n\t\tfont-size: 24rpx;\n\t\tmin-width: 80rpx;\n\t\ttext-align: center;\n\t}\n\n\t/* 商品信息区域 */\n\t.product-info {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t.product-header {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.product-title {\n\t\tflex: 1;\n\t\tmargin-right: 20rpx;\n\n\t\ttext {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #333;\n\t\t\tline-height: 1.4;\n\t\t}\n\t}\n\n\t.favorite-btn {\n\t\tpadding: 8rpx;\n\t}\n\n\t.price-stats-row {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: flex-end;\n\t}\n\n\t.price-info {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tgap: 20rpx;\n\t}\n\n\t.current-price {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\n\t\t.price-symbol {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #ff4d4f;\n\t\t\tmargin-right: 4rpx;\n\t\t}\n\n\t\t.price-value {\n\t\t\tfont-size: 48rpx;\n\t\t\tfont-weight: 700;\n\t\t\tcolor: #ff4d4f;\n\t\t}\n\t}\n\n\t.original-price {\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #999;\n\t\t\ttext-decoration: line-through;\n\t\t}\n\t}\n\n\t.product-stats {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t}\n\n\t.stat-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\n\t\t.stat-label {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t}\n\n\t\t.stat-value {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t}\n\t}\n\n\t/* 通用区域样式 */\n\t.product-detail-content {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t/* .product-reviews {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t} */\n\n\t/* 底部富文本介绍 */\n\t.product-introduction {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.introduction-rich-text {\n\t\tline-height: 1.6;\n\t}\n\n\t.section-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t}\n\n\t/* 商品详情 */\n\t.detail-rich-text {\n\t\tline-height: 1.6;\n\t}\n\n\n\n\t/* 用户评论 */\n\t.product-reviews {\n\t\tbackground: #fff;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx;\n\t}\n\n\t.section-title {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t}\n\n\t.review-action {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\n\t\ttext {\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.review-stats {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding: 20rpx;\n\t\tbackground: #f8f9fa;\n\t\tborder-radius: 12rpx;\n\t}\n\n\t.stats-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\n\t\t.stats-label {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t}\n\n\t\t.stats-value {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t}\n\t}\n\n\t.review-list {\n\t\t.review-item {\n\t\t\tpadding: 30rpx 0;\n\t\t\tborder-bottom: 1rpx solid #f8f8f8;\n\n\t\t\t&:last-child {\n\t\t\t\tborder-bottom: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t.review-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.user-avatar {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tborder-radius: 50%;\n\t\tmargin-right: 20rpx;\n\t}\n\n\t.user-info {\n\t\tflex: 1;\n\n\t\t.user-name {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tfont-weight: 600;\n\t\t\tdisplay: block;\n\t\t\tmargin-bottom: 8rpx;\n\t\t}\n\t}\n\n\t.review-specs {\n\t\tfont-size: 22rpx;\n\t\tcolor: #999;\n\t\tmargin-top: 4rpx;\n\t\tdisplay: block;\n\t}\n\n\t.review-stars {\n\t\tdisplay: flex;\n\t\tgap: 4rpx;\n\t}\n\n\t.review-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n\n\t.review-content {\n\t\tmargin-bottom: 20rpx;\n\n\t\ttext {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #333;\n\t\t\tline-height: 1.5;\n\t\t}\n\t}\n\n\t.review-images {\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.review-image {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 8rpx;\n\t}\n\n\t.no-reviews {\n\t\ttext-align: center;\n\t\tpadding: 60rpx 0;\n\n\t\ttext {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #999;\n\t\t}\n\t}\n\n\t/* 商家回复样式 */\n\t.merchant-reply {\n\t\tmargin-top: 20rpx;\n\t\tpadding: 20rpx;\n\t\tbackground: #f8f9fa;\n\t\tborder-radius: 12rpx;\n\t\tborder-left: 4rpx solid #009966;\n\t}\n\n\t.reply-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 12rpx;\n\t}\n\n\t.reply-label {\n\t\tfont-size: 24rpx;\n\t\tcolor: #009966;\n\t\tfont-weight: 600;\n\t}\n\n\t.reply-time {\n\t\tfont-size: 22rpx;\n\t\tcolor: #999;\n\t}\n\n\t.reply-content {\n\t\tfont-size: 26rpx;\n\t\tcolor: #333;\n\t\tline-height: 1.5;\n\t}\n\n\n\n\t/* 底部操作栏 */\n\t.bottom-actions {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbackground: #fff;\n\t\tpadding: 20rpx 30rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tbox-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t\tz-index: 100;\n\t}\n\n\t.action-left {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tgap: 30rpx;\n\t}\n\n\t.action-btn {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 8rpx;\n\t\tmin-height: 80rpx;\n\t\twidth: 80rpx;\n\n\t\t.action-icon {\n\t\t\twidth: 40rpx;\n\t\t\theight: 40rpx;\n\t\t}\n\n\t\ttext {\n\t\t\tfont-size: 20rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.action-right {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t}\n\n\t.add-cart-btn,\n\t.buy-now-btn {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t}\n\n\t.add-cart-btn {\n\t\tbackground: #FFAA00;\n\t\tcolor: #fff;\n\t\tborder: 2rpx solid #FFAA00;\n\t}\n\n\t.buy-now-btn {\n\t\tbackground: #009966;\n\t\tcolor: #fff;\n\t}\n\n\t/* 底部操作栏中的客服按钮样式重置 */\n\t.bottom-actions .customer-service-btn {\n\t\tbackground: none !important;\n\t\tborder: none !important;\n\t\tpadding: 0 !important;\n\t\tmargin: 0 !important;\n\t\tborder-radius: 0 !important;\n\t\tbox-shadow: none !important;\n\t\toutline: none !important;\n\t\tfont-size: inherit !important;\n\t\tfont-family: inherit !important;\n\t\tline-height: inherit !important;\n\t\tcolor: inherit !important;\n\t\ttext-align: inherit !important;\n\t\tvertical-align: top !important;\n\n\t\t/* 确保图标大小一致 */\n\t\t.action-icon {\n\t\t\twidth: 40rpx !important;\n\t\t\theight: 40rpx !important;\n\t\t}\n\n\t\t/* 确保文字样式一致 */\n\t\ttext {\n\t\t\tfont-size: 20rpx !important;\n\t\t\tcolor: #666 !important;\n\t\t\tline-height: 1 !important;\n\t\t}\n\n\t\t&::after {\n\t\t\tborder: none !important;\n\t\t\tbackground: none !important;\n\t\t}\n\t}\n\n\t/* SKU选择弹窗 */\n\t.sku-popup {\n\t\tpadding: 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmax-height: 80vh;\n\t\tmin-height: 400rpx;\n\t\tbox-sizing: border-box;\n\t\tbackground: #fff;\n\t\tborder-radius: 20rpx 20rpx 0 0;\n\t}\n\n\t.sku-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: 24rpx;\n\t\tpadding-bottom: 16rpx;\n\t\tborder-bottom: 1rpx solid #e9ecef;\n\t}\n\n\t.sku-product-image {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tborder-radius: 8rpx;\n\t\tmargin-right: 16rpx;\n\t}\n\n\t.sku-product-info {\n\t\tflex: 1;\n\t}\n\n\t.sku-product-name {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 700;\n\t\tmargin-bottom: 4rpx;\n\t}\n\n\t.sku-product-price {\n\t\t.sku-price-symbol {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 600;\n\t\t}\n\n\t\t.sku-price-value {\n\t\t\tfont-size: 40rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\n\t.sku-close {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease;\n\t}\n\n\t.sku-close:active {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.sku-options {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tpadding-bottom: 20rpx;\n\t\tmin-height: 200rpx;\n\t}\n\n\t.sku-option-group {\n\t\tmargin-bottom: 32rpx;\n\t}\n\n\t.option-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.option-items {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 20rpx;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.option-item {\n\t\tbackground: #f8f9fa;\n\t\tborder: 2rpx solid #e9ecef;\n\t\tpadding: 12rpx 20rpx;\n\t\tborder-radius: 8rpx;\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t}\n\n\t.option-item.active {\n\t\tborder-color: #34C759;\n\t\tbackground: #fff;\n\t\tbox-shadow: 0 0 0 2rpx rgba(52, 199, 89, 0.2);\n\t}\n\n\t.option-item.active::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 3rpx;\n\t\tbackground: linear-gradient(90deg, #34C759, #28a745);\n\t\ttransition: all 0.3s ease;\n\t}\n\n\t.option-item:active {\n\t\ttransform: scale(0.96);\n\t\tbackground: #f0f0f0;\n\t\ttransition: all 0.1s ease;\n\t}\n\n\t.option-item text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 500;\n\t\tposition: relative;\n\t\tz-index: 1;\n\t\ttransition: color 0.3s ease, font-weight 0.3s ease;\n\t}\n\n\t.option-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 4rpx;\n\t}\n\n\t.sku-price {\n\t\tfont-size: 22rpx;\n\t\tcolor: #FF6B35;\n\t\tfont-weight: 600;\n\t}\n\n\t.option-item.active text {\n\t\tcolor: #333;\n\t\tfont-weight: 600;\n\t}\n\n\t.quantity-selector {\n\t\tmargin-top: 24rpx;\n\t\tpadding-top: 24rpx;\n\t\tborder-top: 1rpx solid #e9ecef;\n\t}\n\n\t.quantity-title {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t\tmargin-bottom: 16rpx;\n\t}\n\n\t.quantity-control {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tbackground: #f5f5f5;\n\t\tborder-radius: 12rpx;\n\t\tpadding: 8rpx 16rpx;\n\t}\n\n\t.quantity-btn {\n\t\tpadding: 8rpx;\n\t\tborder-radius: 50%;\n\t\ttransition: background-color 0.2s ease;\n\t}\n\n\t.quantity-btn:active {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.quantity-value {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tfont-weight: 600;\n\t}\n\n\t.sku-footer {\n\t\tmargin-top: auto;\n\t\tbackground: #ffffff;\n\t\tpadding: 24rpx 0 0 0;\n\t\tborder-top: 1rpx solid #f0f0f0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.sku-total {\n\t\t.total-price {\n\t\t\tfont-size: 36rpx;\n\t\t\tcolor: #FF6B35;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\n\t.sku-action {\n\t\tbackground: linear-gradient(135deg, #34C759 0%, #28a745 100%);\n\t\tpadding: 16rpx 32rpx;\n\t\tborder-radius: 12rpx;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(52, 199, 89, 0.3);\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.sku-action:active {\n\t\ttransform: scale(0.95);\n\t\tbox-shadow: 0 2rpx 8rpx rgba(52, 199, 89, 0.3);\n\t}\n\n\t.sku-action text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tfont-weight: 600;\n\t}\n</style>","import mod from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderDevTool\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&id=d7166054&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1758547743802\n      var cssReload = require(\"D:/HbuilderDevTool/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
>>>>>>> Stashed changes
