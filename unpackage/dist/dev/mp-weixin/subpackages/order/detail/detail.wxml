<view class="data-v-08f7b1ce"><view class="{{['order-detail-container','data-v-08f7b1ce',(showCoupon||showPayment)?'popup-open':'']}}"><block wx:if="{{loading}}"><view class="skeleton-container data-v-08f7b1ce"><view class="skeleton-address data-v-08f7b1ce"><view class="skeleton-address-content data-v-08f7b1ce"><view class="skeleton-address-info data-v-08f7b1ce"><view class="skeleton-address-user data-v-08f7b1ce"><view class="skeleton-name data-v-08f7b1ce"></view><view class="skeleton-phone data-v-08f7b1ce"></view></view><view class="skeleton-address-detail data-v-08f7b1ce"></view></view><view class="skeleton-arrow data-v-08f7b1ce"></view></view></view><view class="skeleton-product data-v-08f7b1ce"><block wx:for="{{2}}" wx:for-item="i" wx:for-index="__i0__" wx:key="*this"><view class="skeleton-product-card data-v-08f7b1ce"><view class="skeleton-product-img data-v-08f7b1ce"></view><view class="skeleton-product-info data-v-08f7b1ce"><view class="skeleton-product-name data-v-08f7b1ce"></view><view class="skeleton-product-desc data-v-08f7b1ce"></view><view class="skeleton-product-bottom data-v-08f7b1ce"><view class="skeleton-product-price data-v-08f7b1ce"></view><view class="skeleton-product-quantity data-v-08f7b1ce"></view></view></view></view></block></view><view class="skeleton-price data-v-08f7b1ce"><block wx:for="{{4}}" wx:for-item="i" wx:for-index="__i1__" wx:key="*this"><view class="skeleton-price-item data-v-08f7b1ce"><view class="skeleton-price-label data-v-08f7b1ce"></view><view class="skeleton-price-value data-v-08f7b1ce"></view></view></block></view><view class="skeleton-payment data-v-08f7b1ce"><view class="skeleton-payment-title data-v-08f7b1ce"></view><view class="skeleton-payment-method data-v-08f7b1ce"><view class="skeleton-payment-icon data-v-08f7b1ce"></view><view class="skeleton-payment-name data-v-08f7b1ce"></view><view class="skeleton-payment-arrow data-v-08f7b1ce"></view></view></view></view></block><block wx:else><view class="data-v-08f7b1ce"><block wx:if="{{selectedAddress}}"><view data-event-opts="{{[['tap',[['selectAddress',['$event']]]]]}}" class="address-section data-v-08f7b1ce" bindtap="__e"><view class="address-content data-v-08f7b1ce"><view class="address-info data-v-08f7b1ce"><view class="address-user data-v-08f7b1ce"><text class="user-name data-v-08f7b1ce">{{selectedAddress.name}}</text><text class="user-phone data-v-08f7b1ce">{{selectedAddress.phone}}</text></view><view class="address-detail data-v-08f7b1ce">{{''+selectedAddress.province+selectedAddress.city+selectedAddress.district+selectedAddress.detail+''}}</view></view><view class="address-arrow data-v-08f7b1ce"><u-icon vue-id="15ff08f8-1" name="arrow-right" color="#999" size="24" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view></view></block><block wx:else><view data-event-opts="{{[['tap',[['addAddress',['$event']]]]]}}" class="no-address-section data-v-08f7b1ce" bindtap="__e"><view class="no-address-content data-v-08f7b1ce"><view class="no-address-icon data-v-08f7b1ce"><u-icon vue-id="15ff08f8-2" name="map" color="#999" size="40" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view><view class="no-address-info data-v-08f7b1ce"><view class="no-address-title data-v-08f7b1ce">请添加收货地址</view><view class="no-address-desc data-v-08f7b1ce">选择您的收货地址以便配送</view></view><view class="no-address-arrow data-v-08f7b1ce"><u-icon vue-id="15ff08f8-3" name="plus" color="#89D600" size="24" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view></view></block><block wx:if="{{$root.g0}}"><view class="product-section data-v-08f7b1ce"><block wx:for="{{productList}}" wx:for-item="product" wx:for-index="index" wx:key="index"><view class="product-card data-v-08f7b1ce"><image class="product-img data-v-08f7b1ce" src="{{product.image}}" mode="aspectFill"></image><view class="product-info data-v-08f7b1ce"><view class="product-name data-v-08f7b1ce">{{product.name}}</view><view class="product-desc data-v-08f7b1ce">{{product.description}}</view><view class="product-bottom data-v-08f7b1ce"><view class="product-price data-v-08f7b1ce">{{"¥"+product.price}}</view><view class="product-quantity data-v-08f7b1ce">{{"×"+product.quantity}}</view></view></view></view></block></view></block><view class="remark-section data-v-08f7b1ce"><view class="section-title data-v-08f7b1ce">备注</view><view class="remark-input data-v-08f7b1ce"><u-textarea bind:input="__e" vue-id="15ff08f8-4" placeholder="请输入订单备注（选填）" maxlength="{{100}}" height="{{48}}" show-count="{{true}}" border="{{none}}" custom-style="{{remarkInputStyle}}" value="{{memberRemark}}" data-event-opts="{{[['^input',[['__set_model',['','memberRemark','$event',[]]]]]]}}" class="data-v-08f7b1ce" bind:__l="__l"></u-textarea></view></view><view class="price-section data-v-08f7b1ce"><view class="price-item data-v-08f7b1ce"><text class="price-label data-v-08f7b1ce">运费</text><text class="price-value data-v-08f7b1ce">{{"¥"+shippingFee}}</text></view><view class="price-item data-v-08f7b1ce"><text class="price-label data-v-08f7b1ce">商品小计</text><text class="price-value data-v-08f7b1ce">{{"¥"+$root.g1}}</text></view><view data-event-opts="{{[['tap',[['showCouponModal',['$event']]]]]}}" class="price-item coupon-item data-v-08f7b1ce" bindtap="__e"><text class="price-label data-v-08f7b1ce">优惠券</text><view class="coupon-info data-v-08f7b1ce"><text class="{{['coupon-text','data-v-08f7b1ce',couponTextClass]}}">{{couponText}}</text><u-icon vue-id="15ff08f8-5" name="arrow-right" color="#999" size="20" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view><view class="price-item total-item data-v-08f7b1ce"><text class="price-label data-v-08f7b1ce">合计</text><text class="price-value total-price data-v-08f7b1ce">{{"¥"+totalPrice}}</text></view></view><view data-event-opts="{{[['tap',[['showPaymentModal',['$event']]]]]}}" class="payment-section data-v-08f7b1ce" bindtap="__e"><view class="section-title data-v-08f7b1ce">支付方式</view><view class="payment-method data-v-08f7b1ce"><view class="payment-info data-v-08f7b1ce"><u-icon class="payment-icon data-v-08f7b1ce" vue-id="15ff08f8-6" name="{{selectedPayment.icon}}" color="#07C160" size="24" bind:__l="__l"></u-icon><text class="payment-name data-v-08f7b1ce">{{selectedPayment.name}}</text></view><view class="payment-arrow data-v-08f7b1ce"><u-icon vue-id="15ff08f8-7" name="arrow-right" color="#999" size="20" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view></view><view class="delivery-section data-v-08f7b1ce"><view class="section-title data-v-08f7b1ce">收货方式</view><view class="delivery-method data-v-08f7b1ce"><view class="delivery-info data-v-08f7b1ce"><u-icon class="delivery-icon data-v-08f7b1ce" vue-id="15ff08f8-8" name="car" color="#89D600" size="24" bind:__l="__l"></u-icon><text class="delivery-name data-v-08f7b1ce">快递</text></view><view class="delivery-tag data-v-08f7b1ce"><text class="tag-text data-v-08f7b1ce">推荐</text></view></view></view><view class="bottom-bar data-v-08f7b1ce"><view class="total-info data-v-08f7b1ce"><text class="total-label data-v-08f7b1ce">合计：</text><text class="total-amount data-v-08f7b1ce">{{"¥"+totalPrice}}</text></view><block wx:if="{{selectedPayment.name!=='对公转账'}}"><view data-event-opts="{{[['tap',[['confirmOrder',['$event']]]]]}}" class="buy-button data-v-08f7b1ce" bindtap="__e">立即购买</view></block><block wx:else><view data-event-opts="{{[['tap',[['handleBankTransferOrder',['$event']]]]]}}" class="buy-button bank-transfer-button data-v-08f7b1ce" bindtap="__e">联系客服</view></block></view></view></block><u-popup vue-id="15ff08f8-9" show="{{showCoupon}}" mode="bottom" round="{{20}}" height="70%" mask-close-able="{{true}}" safe-area-inset-bottom="{{true}}" data-event-opts="{{[['^close',[['closeCouponModal']]]]}}" bind:close="__e" class="data-v-08f7b1ce" bind:__l="__l" vue-slots="{{['default']}}"><view class="coupon-modal data-v-08f7b1ce"><view class="modal-header data-v-08f7b1ce"><view class="modal-title data-v-08f7b1ce">优惠券</view><view class="modal-subtitle data-v-08f7b1ce">{{'优惠券可叠加使用，一共'+$root.g2+"张优惠券，可抵扣"}}<label class="discount-amount _span data-v-08f7b1ce">{{"¥"+selectedDiscount}}</label></view><view data-event-opts="{{[['tap',[['closeCouponModal',['$event']]]]]}}" class="modal-close data-v-08f7b1ce" bindtap="__e"><u-icon vue-id="{{('15ff08f8-10')+','+('15ff08f8-9')}}" name="close" color="#999" size="32" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view><view class="coupon-list data-v-08f7b1ce"><block wx:for="{{availableCoupons}}" wx:for-item="coupon" wx:for-index="index" wx:key="index"><view class="coupon-item data-v-08f7b1ce"><view data-event-opts="{{[['tap',[['toggleCoupon',[index]]]]]}}" class="coupon-content data-v-08f7b1ce" bindtap="__e"><view class="coupon-left data-v-08f7b1ce"><view class="coupon-amount data-v-08f7b1ce">{{'¥'+(coupon.originalData?coupon.originalData.price:coupon.amount)}}</view></view><view class="coupon-center data-v-08f7b1ce"><view class="coupon-label data-v-08f7b1ce">{{coupon.label}}</view><view class="coupon-date data-v-08f7b1ce">{{coupon.dateRange}}</view><view class="coupon-note data-v-08f7b1ce">{{coupon.note}}</view></view><view class="coupon-right data-v-08f7b1ce"><u-icon vue-id="{{('15ff08f8-11-'+index)+','+('15ff08f8-9')}}" name="{{coupon.selected?'checkmark-circle-fill':'checkmark-circle'}}" color="{{coupon.selected?'#89D600':'#ddd'}}" size="32" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view></view></block></view><view class="modal-footer data-v-08f7b1ce"><view data-event-opts="{{[['tap',[['confirmCouponSelection',['$event']]]]]}}" class="confirm-button data-v-08f7b1ce" bindtap="__e">确定</view></view></view></u-popup></view><u-popup vue-id="15ff08f8-12" show="{{showPayment}}" mode="bottom" round="{{20}}" height="50%" mask-close-able="{{true}}" safe-area-inset-bottom="{{true}}" data-event-opts="{{[['^close',[['closePaymentModal']]]]}}" bind:close="__e" class="data-v-08f7b1ce" bind:__l="__l" vue-slots="{{['default']}}"><view class="payment-modal data-v-08f7b1ce"><view class="modal-header data-v-08f7b1ce"><view class="modal-title data-v-08f7b1ce">支付方式</view><view data-event-opts="{{[['tap',[['closePaymentModal',['$event']]]]]}}" class="modal-close data-v-08f7b1ce" bindtap="__e"><u-icon vue-id="{{('15ff08f8-13')+','+('15ff08f8-12')}}" name="close" color="#999" size="32" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view><view class="payment-list data-v-08f7b1ce"><block wx:for="{{paymentMethods}}" wx:for-item="payment" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectPayment',[index]]]]]}}" class="payment-item data-v-08f7b1ce" bindtap="__e"><view class="payment-content data-v-08f7b1ce"><view class="payment-left data-v-08f7b1ce"><u-icon class="payment-icon data-v-08f7b1ce" vue-id="{{('15ff08f8-14-'+index)+','+('15ff08f8-12')}}" name="{{payment.icon}}" color="{{payment.name==='微信支付'?'#07C160':'#1E88E5'}}" size="24" bind:__l="__l"></u-icon><view class="payment-info data-v-08f7b1ce"><view class="payment-name data-v-08f7b1ce">{{payment.name}}</view><view class="payment-desc data-v-08f7b1ce">{{payment.desc}}</view></view></view><view class="payment-right data-v-08f7b1ce"><u-icon vue-id="{{('15ff08f8-15-'+index)+','+('15ff08f8-12')}}" name="{{payment.selected?'checkmark':'checkmark'}}" color="{{payment.selected?'#89D600':'#ddd'}}" size="32" class="data-v-08f7b1ce" bind:__l="__l"></u-icon></view></view></view></block></view><view class="modal-footer data-v-08f7b1ce"><view data-event-opts="{{[['tap',[['confirmPaymentSelection',['$event']]]]]}}" class="confirm-button data-v-08f7b1ce" bindtap="__e">确定</view></view></view></u-popup><icon-com-vue vue-id="15ff08f8-16" class="data-v-08f7b1ce" bind:__l="__l"></icon-com-vue><block wx:if="{{showPaymentSuccess}}"><view data-event-opts="{{[['tap',[['handleOverlayClick',['$event']]]]]}}" class="{{['payment-success-modal-overlay','data-v-08f7b1ce',(showPaymentSuccess)?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="payment-success-modal data-v-08f7b1ce" catchtap="__e"><view class="success-icon data-v-08f7b1ce"><view class="success-circle data-v-08f7b1ce"><view class="success-check data-v-08f7b1ce"><view class="check-line check-line1 data-v-08f7b1ce"></view><view class="check-line check-line2 data-v-08f7b1ce"></view></view></view></view><view class="modal-title data-v-08f7b1ce">支付成功</view><view class="amount-info data-v-08f7b1ce"><text class="amount-label data-v-08f7b1ce">支付金额</text><text class="amount-value data-v-08f7b1ce">{{"¥"+paymentAmount}}</text></view><view class="thank-message data-v-08f7b1ce"><text class="thank-text data-v-08f7b1ce">感谢您的购买！</text><text class="delivery-text data-v-08f7b1ce">我们将尽快为您发货</text></view><view class="button-group data-v-08f7b1ce"><view data-event-opts="{{[['tap',[['handlePaymentSuccessClose',['$event']]]]]}}" class="button secondary-button data-v-08f7b1ce" bindtap="__e">继续购物</view><view data-event-opts="{{[['tap',[['handlePaymentSuccessConfirm',['$event']]]]]}}" class="button primary-button data-v-08f7b1ce" bindtap="__e">查看订单</view></view></view></view></block></view>